import "./cljs_env.js";
shadow$provide.module$node_modules$vh_sticky_table_header$build$commonjs$StickyTableHeader=function(global,require,module,exports){Object.defineProperty(exports,"__esModule",{value:!0});global=function(){function StickyTableHeader(tableContainer,cloneContainer,top){this.cloneHeader=null;var header=tableContainer.querySelector("thead");this.tableContainer=tableContainer;this.cloneContainer=cloneContainer;this.top=top;if(!header||!this.tableContainer.parentNode)throw Error("Header or parent node of sticky header table container not found!");
this.tableContainerParent=this.tableContainer.parentNode;this.cloneContainerParent=this.cloneContainer.parentNode;this.header=header;this.setup()}StickyTableHeader.prototype.destroy=function(){this.scrollListener&&window.removeEventListener("scroll",this.scrollListener);this.currentFrameRequest&&window.cancelAnimationFrame(this.currentFrameRequest);this.sizeListener&&window.removeEventListener("resize",this.sizeListener);this.containerScrollListener&&this.tableContainerParent.removeEventListener("click",
this.containerScrollListener);this.clickListener&&this.cloneContainer.removeEventListener("click",this.clickListener);this.cloneHeader&&this.cloneContainer.removeChild(this.cloneHeader)};StickyTableHeader.prototype.setupClickEventMirroring=function(){var _this=this;this.clickListener=function(event){var containerRect=_this.tableContainer.getBoundingClientRect(),cloneRect=_this.cloneContainer.getBoundingClientRect(),bodyRect=document.body.getBoundingClientRect();window.scrollTo({top:containerRect.y-
bodyRect.y-_this.getTop()});setTimeout(function(){containerRect=_this.tableContainer.getBoundingClientRect();cloneRect=_this.cloneContainer.getBoundingClientRect();var originalTarget=document.elementFromPoint(containerRect.x+(event.clientX-cloneRect.x),containerRect.y+(event.clientY-cloneRect.y));originalTarget&&originalTarget.click()},0)};this.cloneContainer.addEventListener("click",this.clickListener)};StickyTableHeader.prototype.setupSticky=function(){var _this=this,updateSticky=function(){_this.currentFrameRequest=
window.requestAnimationFrame(function(){var lastElement=_this.tableContainer.querySelector("tbody tr:last-child"),bodyRectY=document.body.getBoundingClientRect().y,tableRect=_this.tableContainer.getBoundingClientRect(),tableTop=tableRect.y-bodyRectY;lastElement=lastElement?lastElement.getBoundingClientRect().y-bodyRectY-_this.header.getBoundingClientRect().height:tableRect.y+tableRect.height-bodyRectY-_this.header.getBoundingClientRect().height;bodyRectY=window.scrollY-tableTop;tableRect=window.scrollY-
lastElement;var topPx=_this.getTop();bodyRectY>-topPx&&null===_this.cloneHeader?_this.cloneHeader=_this.createClone():null!==_this.cloneHeader&&(bodyRectY<=-topPx?(_this.cloneContainer.removeChild(_this.cloneHeader),_this.cloneHeader=null):tableRect<-topPx?(_this.cloneContainerParent.style.position="fixed",_this.cloneContainerParent.style.top="".concat(topPx,"px")):(_this.cloneContainerParent.style.position="absolute",_this.cloneContainerParent.style.top="".concat(lastElement-tableTop,"px")))})};
this.scrollListener=function(){return updateSticky()};window.addEventListener("scroll",this.scrollListener);updateSticky()};StickyTableHeader.prototype.setup=function(){this.setupSticky();this.setupSizeMirroring();this.setupClickEventMirroring();this.setupHorizontalScrollMirroring()};StickyTableHeader.prototype.setupSizeMirroring=function(){var _this=this;this.sizeListener=function(){window.requestAnimationFrame(function(){var headerSize=_this.header.getBoundingClientRect().width;_this.cloneContainer.style.width=
"".concat(headerSize,"px");_this.cloneContainerParent.style.top="".concat(_this.getTop(),"px");_this.setHorizontalScrollOnClone()})};window.addEventListener("resize",this.sizeListener)};StickyTableHeader.prototype.setupHorizontalScrollMirroring=function(){var _this=this;this.containerScrollListener=function(){window.requestAnimationFrame(function(){_this.setHorizontalScrollOnClone()})};this.tableContainerParent.addEventListener("scroll",this.containerScrollListener)};StickyTableHeader.prototype.createClone=
function(){var clone=this.header.cloneNode(!0);this.cloneContainer.append(clone);var headerSize=this.header.getBoundingClientRect().width;Array.from(this.header.children[0].children).forEach(function(cell,index){clone.children[0].children[index].style.width=cell.getBoundingClientRect().width/headerSize*100+"%"});this.cloneContainer.style.display="table";this.cloneContainer.style.width="".concat(headerSize,"px");this.cloneContainerParent.style.position="fixed";this.cloneContainerParent.style.overflow=
"hidden";this.cloneContainerParent.style.top="".concat(this.getTop(),"px");this.setHorizontalScrollOnClone();return clone};StickyTableHeader.prototype.setHorizontalScrollOnClone=function(){this.cloneContainerParent.style.width="".concat(this.tableContainerParent.getBoundingClientRect().width,"px");this.cloneContainerParent.scrollLeft=this.tableContainerParent.scrollLeft};StickyTableHeader.prototype.sizeToPx=function(size){if("number"===typeof size)return size;if(size.match(/rem$/))return size=+size.replace(/rem$/,
""),Number.parseFloat(window.getComputedStyle(document.getElementsByTagName("html")[0]).fontSize)*size;console.error("Unsupported size format for sticky table header displacement.");return 0};StickyTableHeader.prototype.getTop=function(){for(var windowWidth=document.body.getBoundingClientRect().width,sizes=Object.entries(this.top).filter(function(_a){return"max"!==_a[0]}).sort(function(_a,_b){_b=_b[0];return Number.parseInt(_a[0],10)-Number.parseInt(_b,10)}),i=0,size=void 0;size=sizes[i++];)if(windowWidth<
Number.parseInt(size[0],10))return this.sizeToPx(size[1]);return this.sizeToPx(this.top.max)};return StickyTableHeader}();exports.default=global}
//# sourceMappingURL=module$node_modules$vh_sticky_table_header$build$commonjs$StickyTableHeader.js.map

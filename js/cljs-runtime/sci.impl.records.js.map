{"version":3,"sources":["sci/impl/records.cljc"],"mappings":"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","names":["js/sci","js/sci.impl","js/sci.impl.records","js/sci.impl.records.to-string","method-table__4747__auto__","cljs.core.atom","prefer-table__4748__auto__","method-cache__4749__auto__","cached-hierarchy__4750__auto__","hierarchy__4751__auto__","cljs.core.get","fexpr__67976","cljs.core/MultiFn","cljs.core.symbol","sci.impl.records/to-string","sci.impl.types/type-impl","this","t","cljs.core/namespace","cljs.core/name","cljs.core/hash","sci.impl.records/clojure-str","v","cljs.core.into","sci$impl$records$SciPrintMethod$_sci_print_method$dyn","x__4550__auto__","m__4551__auto__","sci.impl.records/-sci-print-method","goog/typeOf","m__4549__auto__","cljs.core/missing-protocol","sci.impl.records/SciPrintMethod","x","w","sci.impl.records/preserve-own-meta","m","old-meta","cljs.core.assoc","this__4491__auto__","writer__4492__auto__","opt__4493__auto__","cljs.core/-write","sci.impl.records/SciRecord","sci.impl.records/->SciRecord","rec-name","var","ext-map","my_hash","_","hq","type-hash","cljs.core/munge","h","cljs.core/hash-unordered-coll","other","cljs.core._EQ_","cljs.core/meta","cljs.core/with-meta","k","cljs.core/-lookup","else","cljs.core/count","entry","cljs.core/vector?","cljs.core/-nth","cljs.core.reduce","cljs.core/-conj","cljs.core/-contains-key?","cljs.core.dissoc","cljs.core/-seq","cljs.core/-iterator","opts","temp__5751__auto__","rv","pm","cljs.core.write_all","f","init","p__68086","vec__68087","cljs.core.nth","ret","sci.impl.records/->record-impl","var_args","args__4870__auto__","len__4864__auto__","i__4865__auto__","argseq__4871__auto__","cljs.core/IndexedSeq","sci.impl.records/defrecord","p__68106","vec__68107","seq__68108","cljs.core/seq","first__68109","cljs.core/first","cljs.core/next","seq68097","G__68098","G__68099","G__68100","G__68101","G__68102","self__4851__auto__","fname","form","ctx","record-name","fields","raw-protocol-impls","cljs.core/cons","cljs.core/rest","cljs.core.sequence","cljs.core.concat","cljs.core/List","cljs.core/vec","factory-fn-str","factory-fn-sym","map-factory-sym","keys","cljs.core.mapv","cljs.core/keyword","rec-type","sci.impl.utils/current-ns-name","protocol-impls","sci.impl.utils/split-when","cljs.core/symbol?","field-set","cljs.core/set","cljs.core.mapcat","p__68110","vec__68111","seq__68112","first__68113","protocol-name","impls","expr","p1__68093#","cljs.core/group-by","protocol","G__68115","G__68116","G__68117","fexpr__68114","cljs.core/deref","sci.impl.utils/eval-resolve-state","or__4253__auto__","sci.impl.utils.throw_error_with_location","sci.impl.utils/var?","protocol-var","sci.impl.vars.alter_var_root","cljs.core/update","cljs.core.fnil","cljs.core/conj","sci.impl.protocols/type->str","protocol-ns","pns","sci.impl.types/getName","fq-meth-name","cljs.core/simple-symbol?","cljs.core.map","p__68118","vec__68119","method-name","bodies","impl","args","body","destr","sci.impl.utils/maybe-destructured","orig-this-sym","rest-args","shadows-this?","p1__68094#","cljs.core/some","this-sym","cljs.core.gensym","bindings","field","cljs.core.keyword","cljs.core/disj","sci.impl.records/sci-record?","cljs.core/map?","G__68122","cljs.core/record?","G__68124","sci.impl.records/resolve-record-or-protocol-class","js/Error","sym","sym-str","last-dot","clojure.string.last_index_of","class-name","cljs.core.subs","namespace","sci.impl.records.resolve_record_or_protocol_class","package","class","clojure.string/replace","temp__5753__auto__","sci-var","ns","cljs.core.get_in","sci.impl.records/resolve-record-class","class-sym","sci.lang/Type"],"sourcesContent":["(ns sci.impl.records\n  {:no-doc true}\n  (:refer-clojure :exclude [defrecord record?])\n  (:require [clojure.string :as str]\n            [sci.impl.protocols :as protocols]\n            [sci.impl.types :as types]\n            [sci.impl.utils :as utils]\n            [sci.impl.vars :as vars]\n            [sci.lang]))\n\n#?(:clj (set! *warn-on-reflection* true))\n\n#?(:clj\n   (defn assert-no-jvm-interface [protocol protocol-name expr]\n     (when (and (class? protocol)\n                (not (= Object protocol)))\n       (utils/throw-error-with-location\n        (str \"defrecord/deftypecurrently only support protocol implementations, found: \" protocol-name)\n        expr))))\n\n(defmulti to-string types/type-impl)\n(defmethod to-string :default [this]\n  (let [t (types/type-impl this)]\n    (str (namespace t) \".\" (name t) \"@\"\n         #?(:clj (Integer/toHexString (hash this))\n            :cljs (.toString (hash this) 16)))))\n\n(defn clojure-str [v]\n  (let [t (types/type-impl v)]\n    (str \"#\" t (into {} v))))\n\n(defprotocol SciPrintMethod\n  (-sci-print-method [x w]))\n\n(defn preserve-own-meta\n  \"TODO: now that we are using our own record implementation, we can move away from metadata.\"\n  [m old-meta]\n  (if (:sci.impl/record m)\n    m\n    (assoc m\n           :type (:type old-meta)\n           :sci.impl/record (:sci.impl/record old-meta)\n           :sci.impl/constructor (:sci.impl/constructor old-meta)\n           :sci.impl/var (:sci.imp/record-var old-meta)\n           :sci.impl.record/map-constructor (:sci.impl.record/map-constructor old-meta))))\n\n#?(:clj\n   (deftype SciRecord [rec-name\n                       var ext-map\n                       ^:unsynchronized-mutable my_hash\n                       ^:unsynchronized-mutable my_hasheq]\n     clojure.lang.IRecord ;; marker interface\n\n     clojure.lang.IHashEq\n     (hasheq [_]\n       (let [hq my_hasheq]\n         (if (zero? hq)\n           (let [type-hash (hash rec-name)\n                 h (int (bit-xor type-hash (clojure.lang.APersistentMap/mapHasheq ext-map)))]\n             (set! my_hasheq h)\n             h)\n           hq)))\n     (hashCode [_]\n       (let [hq my_hash]\n         (if (zero? hq)\n           (let [h (int (clojure.lang.APersistentMap/mapHash ext-map))]\n             (set! my_hash h)\n             h)\n           hq)))\n     (equals [this other]\n       (clojure.lang.APersistentMap/mapEquals this other))\n\n     clojure.lang.IObj\n     (meta [_]\n       (meta ext-map))\n     (withMeta [_ m]\n       (SciRecord.\n        rec-name var (with-meta ext-map (preserve-own-meta m (meta ext-map))) 0 0))\n\n     clojure.lang.ILookup\n     (valAt [_this k]\n       (.valAt ^clojure.lang.ILookup ext-map k))\n     (valAt [_ k else]\n       (.valAt ^clojure.lang.ILookup ext-map k else))\n\n     clojure.lang.IPersistentMap\n     (count [_]\n       (.count ^clojure.lang.IPersistentMap ext-map))\n     (empty [_]\n       (throw (UnsupportedOperationException. (str \"Can't create empty: \" (str rec-name)))))\n     (cons [this e]\n       ((var clojure.core/imap-cons) this e))\n     (equiv [this gs]\n       (boolean\n        (or (identical? this gs)\n            (when (instance? SciRecord gs)\n              (and (identical? rec-name (.-rec-name ^SciRecord gs))\n                   (= ext-map (.-ext-map ^SciRecord gs)))))))\n     (containsKey [_this k]\n       (.containsKey ^clojure.lang.IPersistentMap ext-map k))\n     (entryAt [_this k]\n       (.entryAt ^clojure.lang.IPersistentMap ext-map k))\n     (seq [_this] (.seq ^clojure.lang.IPersistentMap ext-map))\n     (iterator [_this]\n       (clojure.lang.RT/iter ext-map))\n     (assoc [_this k v]\n       (SciRecord. rec-name var (assoc ext-map k v) 0 0))\n     (without [_this k]\n       (SciRecord. rec-name var (dissoc ext-map k) 0 0))\n\n     java.util.Map\n     java.io.Serializable\n     (size [_this]\n       (.size ^java.util.Map ext-map))\n     (isEmpty [_this]\n       (.isEmpty ^java.util.Map ext-map))\n     (containsValue [_this v]\n       (.containsValue ^java.util.Map ext-map v))\n     (get [_this k]\n       (.get ^java.util.Map ext-map k))\n     (put [_this _k _v]\n       (throw (UnsupportedOperationException.)))\n     (remove [_this _k]\n       (throw (UnsupportedOperationException.)))\n     (putAll [_this _m]\n       (throw (UnsupportedOperationException.)))\n     (clear [_this]\n       (throw (UnsupportedOperationException.)))\n     (keySet [_this]\n       (.keySet ^java.util.Map ext-map))\n     (values [_this]\n       (.values ^java.util.Map ext-map))\n     (entrySet [_this]\n       (.entrySet ^java.util.Map ext-map))\n\n     Object\n     (toString [this]\n       (to-string this))\n\n     SciPrintMethod\n     (-sci-print-method [this w]\n       (if-let [rv var]\n         (let [m (meta rv)]\n           (if-let [pm (:sci.impl/print-method m)]\n             (pm this w)\n             (.write ^java.io.Writer w ^String (clojure-str this))))\n         (.write ^java.io.Writer w ^String (clojure-str this))))))\n\n;; see https://github.com/clojure/clojurescript/blob/9562ae11422243e0648a12c39e7c990ef3f94260/src/main/clojure/cljs/core.cljc#L1804\n#?(:cljs\n   (deftype SciRecord [rec-name\n                       var ext-map\n                       ^:mutable my_hash]\n     IRecord ;; marker interface\n\n     ICloneable\n     (-clone [_]\n       (new SciRecord rec-name var ext-map my_hash))\n\n     IHash\n     (-hash [_]\n       (let [hq my_hash]\n         (if (not (nil? hq))\n           (let [type-hash (hash (-> rec-name munge str))\n                 h (bit-xor type-hash (hash-unordered-coll ext-map))]\n             (set! my_hash h)\n             h)\n           hq)))\n\n     IEquiv\n     (-equiv [this other]\n       (and (some? other)\n            (identical? (.-constructor this)\n                        (.-constructor other))\n            (= rec-name (.-rec-name ^SciRecord other))\n            (= (.-ext-map this) (.-ext-map ^SciRecord other))))\n\n     IMeta\n     (-meta [_]\n       (meta ext-map))\n\n     IWithMeta\n     (-with-meta [_ m]\n       (new SciRecord\n            rec-name var (with-meta ext-map (preserve-own-meta m (meta ext-map))) my_hash))\n\n     ILookup\n     (-lookup [_ k]\n       (-lookup ext-map k))\n     (-lookup [_ k else]\n       (-lookup ext-map k else))\n\n     ICounted\n     (-count [_]\n       (count ext-map))\n\n     ICollection\n     (-conj [this entry]\n       (if (vector? entry)\n         (-assoc this (-nth entry 0) (-nth entry 1))\n         (reduce -conj\n                 this\n                 entry)))\n\n     IAssociative\n     (-contains-key? [_ k]\n       (-contains-key? ext-map k))\n     (-assoc [_ k v]\n       (new SciRecord rec-name var (assoc ext-map k v) nil))\n\n     IMap\n     (-dissoc [_ k]\n       (new SciRecord rec-name var (dissoc ext-map k) nil))\n\n     ISeqable\n     (-seq [_]\n       (-seq ext-map))\n\n     IIterable\n     (-iterator [_]\n       (-iterator ext-map))\n\n     IPrintWithWriter\n     ;; see https://www.mail-archive.com/clojure@googlegroups.com/msg99560.html\n     (-pr-writer [this w opts]\n       (if-let [rv var]\n         (let [m (meta rv)]\n           (if-let [pm (:sci.impl/print-method m)]\n             (pm this w opts)\n             (write-all w (clojure-str this))))\n         (write-all w (clojure-str this))))\n\n     IKVReduce\n     (-kv-reduce [this f init]\n       (reduce (fn [ret [k v]]\n                 (f ret k v)) init this))\n\n     Object\n     (toString [this]\n       (to-string this))))\n\n#?(:clj\n   (defmethod print-method SciRecord [v w]\n     (-sci-print-method v w)))\n\n#?(:clj (defn ->record-impl [rec-name var m]\n          (SciRecord. rec-name var m 0 0))\n   :cljs (defn ->record-impl [rec-name var m]\n           (SciRecord. rec-name var m nil)))\n\n(defn defrecord [[fname & _ :as form] _ ctx record-name fields & raw-protocol-impls]\n  (if (:sci.impl/macroexpanding ctx)\n    (cons 'clojure.core/defrecord (rest form))\n    (let [factory-fn-str (str \"->\" record-name)\n          factory-fn-sym (symbol factory-fn-str)\n          map-factory-sym (symbol (str \"map\" factory-fn-str))\n          keys (mapv keyword fields)\n          rec-type (symbol (str (munge (utils/current-ns-name)) \".\" (str record-name)))\n          protocol-impls (utils/split-when symbol? raw-protocol-impls)\n          field-set (set fields)\n          protocol-impls\n          (mapcat\n           (fn [[protocol-name & impls] #?(:clj expr :cljs expr)]\n             (let [impls (group-by first impls)\n                   protocol (@utils/eval-resolve-state ctx (:bindings ctx) protocol-name)\n                   ;; _ (prn :protocol protocol)\n                   #?@(:cljs [protocol (or protocol\n                                           (when (= 'Object protocol-name)\n                                             ::object))])\n                   _ (when-not protocol\n                       (utils/throw-error-with-location\n                        (str \"Protocol not found: \" protocol-name)\n                        expr))\n                   #?@(:clj [_ (assert-no-jvm-interface protocol protocol-name expr)])\n                   protocol (if (utils/var? protocol) @protocol protocol)\n                   protocol-var (:var protocol)\n                   _ (when protocol-var\n                       ;; TODO: not all externally defined protocols might have the :var already\n                       (vars/alter-var-root protocol-var update :satisfies\n                                            (fnil conj #{}) (protocols/type->str rec-type)))\n                   protocol-ns (:ns protocol)\n                   pns (cond protocol-ns (str (types/getName protocol-ns))\n                             (= #?(:clj Object :cljs ::object) protocol) \"sci.impl.records\")\n                   fq-meth-name #(if (simple-symbol? %)\n                                   (symbol pns (str %))\n                                   %)]\n               (map (fn [[method-name bodies]]\n                      (let [bodies (map rest bodies)\n                            bodies (mapv (fn [impl]\n                                           (let [args (first impl)\n                                                 body (rest impl)\n                                                 destr (utils/maybe-destructured args body)\n                                                 args (:params destr)\n                                                 body (:body destr)\n                                                 orig-this-sym (first args)\n                                                 rest-args (rest args)\n                                                 shadows-this? (some #(= orig-this-sym %) rest-args)\n                                                 this-sym (if shadows-this?\n                                                            (gensym \"this_\")\n                                                            orig-this-sym)\n                                                 args (if shadows-this?\n                                                        (vec (cons this-sym rest-args))\n                                                        args)\n                                                 bindings (mapcat (fn [field]\n                                                                    [field (list (keyword field) this-sym)])\n                                                                  (reduce disj field-set args))\n                                                 bindings (if shadows-this?\n                                                            (concat bindings [orig-this-sym this-sym])\n                                                            bindings)\n                                                 bindings (vec bindings)]\n                                             `(~args\n                                               (let ~bindings\n                                                 ~@body)))) bodies)]\n                        `(defmethod ~(fq-meth-name method-name) ~rec-type ~@bodies)))\n                    impls)))\n           protocol-impls\n           raw-protocol-impls)]\n      `(do\n         (declare ~record-name ~factory-fn-sym)\n         (declare ~map-factory-sym)\n         (def ~(with-meta record-name\n                 {:sci/record true})\n           (sci.impl.records/-create-record-type\n            ~{:sci.impl/type-name (list 'quote rec-type)\n              :sci.impl/record true\n              :sci.impl/constructor (list 'var factory-fn-sym)\n              :sci.impl/var (list 'var record-name)\n              :sci.impl.record/map-constructor (list 'var map-factory-sym)}))\n         (defn ~factory-fn-sym [& args#]\n           (vary-meta (sci.impl.records/->record-impl '~rec-type (var ~record-name) (zipmap ~keys args#))\n                      assoc\n                      :sci.impl/record true\n                      :type ~rec-type))\n         (defn ~map-factory-sym [m#]\n           (vary-meta (sci.impl.records/->record-impl '~rec-type (var ~record-name) m#)\n                      assoc\n                      ;; TODO: now that we're using the SciRecord type, we could move away from these metadata keys\n                      :sci.impl/record true\n                      :type ~rec-type))\n         ~@protocol-impls\n         ~record-name))))\n\n(defn sci-record? [x]\n  (or\n   (when (map? x)\n     (some-> x meta :sci.impl/record))\n   (clojure.core/record? x)))\n\n(defn resolve-record-or-protocol-class\n  \"A record class is represented by a symbol with metadata (currently). This is only an implementation detail.\n   A protocol is represented by a map with :ns, :methods and optionally :class. This is also an implementation detail.\"\n  ;; TODO: we should probably use munging here for namespaces with hyphens in them.\n  ([ctx sym]\n   (let [sym-str (str sym)\n         last-dot (str/last-index-of sym-str \".\")\n         class-name (if last-dot\n                      (subs sym-str (inc last-dot) (count sym-str))\n                      sym-str)\n         namespace (if last-dot\n                     (symbol (subs sym-str 0 last-dot))\n                     (utils/current-ns-name))]\n     (resolve-record-or-protocol-class ctx namespace (symbol class-name))))\n  ([ctx package class]\n   (let [namespace (-> package str (str/replace \"_\" \"-\") symbol)]\n     (when-let [sci-var (let [ns (get-in @(:env ctx) [:namespaces namespace])]\n                          (or (get ns class)\n                              (get (:refers ns) class)))]\n       (if (utils/var? sci-var)\n         @sci-var\n         sci-var)))))\n\n(defn resolve-record-class\n  [ctx class-sym]\n  (when-let [x (resolve-record-or-protocol-class ctx class-sym)]\n    (when (instance? sci.lang.Type x) x)))\n"]}
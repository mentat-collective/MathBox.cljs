{"version":3,"sources":["nextjournal/clerk/render/navbar.cljs"],"mappings":"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","names":["nextjournal.clerk.render.navbar/emoji-re","js/module$node_modules$emoji_regex$index","nextjournal.clerk.render.navbar/stop-event!","event","nextjournal.clerk.render.navbar/scroll-to-anchor!","!state","anchor","map__54758","cljs.core/deref","cljs.core/--destructure-map","cljs.core.get","mobile?","scroll-animation","scroll-el","set-hash?","visible?","scroll-top","offset","cljs.core.swap_BANG_","cljs.core/assoc","p1__54755#","nextjournal.ui.components.motion/animate","js/document.getElementById","cljs.core.subs","obj54761","obj54762","js/history","nextjournal.clerk.render.navbar/theme-class","theme","key","cljs.core.merge","var_args","args__5775__auto__","len__5769__auto__","i__5770__auto__","argseq__5776__auto__","cljs.core/IndexedSeq","nextjournal.clerk.render.navbar/toc-items","p__54784","vec__54785","cljs.core.nth","seq54779","G__54780","cljs.core/first","cljs.core/next","G__54781","self__5754__auto__","items","options","map__54788","cljs.core.into","cljs.core.map","p__54789","map__54790","path","title","cljs.core/seq","nextjournal.clerk.render.navbar/navbar-items","update-at","map__54798","cljs.core.map_indexed","p__54799","map__54800","i","expanded?","loading?","toc","label","or__5045__auto__","clojure.string/capitalize","cljs.core/last","clojure.string.split","emoji","cljs.core/assoc-in","cljs.core/vec","cljs.core.conj","cljs.core/not","js/setTimeout","p1__54793#","cljs.core.assoc","cljs.core/count","and__5043__auto__","nextjournal.clerk.render.navbar/navbar","map__54818","items?","cljs.core/dissoc","nextjournal.clerk.render.navbar/toggle-button","p__54829","vec__54830","seq54826","G__54827","G__54828","content","opts","map__54833","mobile-open?","open?","nextjournal.clerk.render.navbar/spring","nextjournal.clerk.render.navbar/panel","with-let54872","reagent.ratom/with-let-values","temp__5808__auto__","reagent.ratom/*ratom-context*","c__53026__auto__","reagent.debug/has-console","reagent.debug/tracking","reagent.debug/track-console","js/console","init54873","map__54876","p1__54836#","res54874","local-storage-key","component-key","cljs.core.gensym","resize","js/innerWidth","ref-fn","cljs.core/add-watch","p__54877","map__54878","_","old","cljs.core.not_EQ_","nextjournal.ui.components.localstorage/set-item!","js/addEventListener","js/removeEventListener","map__54879","animation-mode","hide-toggle?","mobile-width","width","w","nextjournal.ui.components.motion/animate-presence","nextjournal.ui.components.motion/div","cljs.core._EQ_"],"sourcesContent":["(ns nextjournal.clerk.render.navbar\n  (:require [nextjournal.ui.components.localstorage :as ls]\n            [nextjournal.ui.components.motion :as motion]\n            [applied-science.js-interop :as j]\n            [clojure.string :as str]\n            [reagent.core :as r]\n            [\"emoji-regex\" :as emoji-regex]))\n\n(def emoji-re (emoji-regex))\n\n(defn stop-event! [event]\n  (.preventDefault event)\n  (.stopPropagation event))\n\n(defn scroll-to-anchor!\n  \"Uses framer-motion to animate scrolling to a section.\n  `offset` here is just a visual offset. It looks way nicer to stop\n  just before a section instead of having it glued to the top of\n  the viewport.\"\n  [!state anchor]\n  (let [{:keys [mobile? scroll-animation scroll-el set-hash? visible?]} @!state\n        scroll-top (.-scrollTop scroll-el)\n        offset 40]\n    (when scroll-animation\n      (.stop scroll-animation))\n    (when scroll-el\n      (swap! !state assoc\n             :scroll-animation (motion/animate\n                                scroll-top\n                                (+ scroll-top (.. (js/document.getElementById (subs anchor 1)) getBoundingClientRect -top))\n                                {:onUpdate #(j/assoc! scroll-el :scrollTop (- % offset))\n                                 :onComplete #(when set-hash? (.pushState js/history #js {} \"\" anchor))\n                                 :type :spring\n                                 :duration 0.4\n                                 :bounce 0.15})\n             :visible? (if mobile? false visible?)))))\n\n(defn theme-class [theme key]\n  (-> {:project \"py-3\"\n       :toc \"py-3\"\n       :heading \"mt-1 md:mt-0 text-xs md:text-[12px] uppercase tracking-wider text-slate-500 dark:text-slate-400 font-medium px-3 mb-1 leading-none\"\n       :back \"text-xs md:text-[12px] leading-normal text-slate-500 dark:text-slate-400 md:hover:bg-slate-200 md:dark:hover:bg-slate-700 font-normal px-3 py-1\"\n       :expandable \"text-base md:text-[14px] leading-normal md:hover:bg-slate-200 md:dark:hover:bg-slate-700 dark:text-white px-3 py-2 md:py-1\"\n       :triangle \"text-slate-500 dark:text-slate-400\"\n       :item \"text-base md:text-[14px] md:hover:bg-slate-200 md:dark:hover:bg-slate-700 dark:text-white px-3 py-2 md:py-1 leading-normal\"\n       :icon \"text-slate-500 dark:text-slate-400\"\n       :slide-over \"font-sans bg-white border-r\"\n       :slide-over-unpinned \"shadow-xl\"\n       :toggle \"text-slate-500 absolute right-2 top-[11px] cursor-pointer z-10\"}\n      (merge theme)\n      (get key)))\n\n(defn toc-items [!state items & [options]]\n  (let [{:keys [theme]} @!state]\n    (into\n     [:div]\n     (map\n      (fn [{:keys [path title items]}]\n        [:<>\n         [:a.flex\n          {:href path\n           :class (theme-class theme :item)\n           :on-click (fn [event]\n                       (stop-event! event)\n                       (scroll-to-anchor! !state path))}\n          [:div (merge {} options) title]]\n         (when (seq items)\n           [:div.ml-3\n            [toc-items !state items]])])\n      items))))\n\n(defn navbar-items [!state items update-at]\n  (let [{:keys [mobile? theme]} @!state]\n    (into\n     [:div]\n     (map-indexed\n      (fn [i {:keys [path title expanded? loading? items toc]}]\n        (let [label (or title (str/capitalize (last (str/split path #\"/\"))))\n              emoji (when (zero? (.search label emoji-re))\n                      (first (.match label emoji-re)))]\n          [:<>\n           (if (seq items)\n             [:div.flex.cursor-pointer\n              {:class (theme-class theme :expandable)\n               :on-click (fn [event]\n                           (stop-event! event)\n                           (swap! !state assoc-in (vec (conj update-at i :expanded?)) (not expanded?)))}\n              [:div.flex.items-center.justify-center.flex-shrink-0\n               {:class \"w-[20px] h-[20px] mr-[4px]\"}\n               [:svg.transform.transition\n                {:viewBox \"0 0 100 100\"\n                 :class (str (theme-class theme :triangle) \" \"\n                             \"w-[10px] h-[10px] \"\n                             (if expanded? \"rotate-180\" \"rotate-90\"))}\n                [:polygon {:points \"5.9,88.2 50,11.8 94.1,88.2 \" :fill \"currentColor\"}]]]\n              [:div label]]\n             [:a.flex\n              {:href path\n               :class (theme-class theme :item)\n               :on-click (fn []\n                           (when toc\n                             (swap! !state assoc-in (vec (conj update-at i :loading?)) true)\n                             (js/setTimeout\n                              (fn []\n                                (swap! !state #(-> (assoc-in % (vec (conj update-at i :loading?)) false)\n                                                   (assoc :toc toc))))\n                              500))\n                           (when mobile?\n                             (swap! !state assoc :visible? false)))}\n              [:div.flex.items-center.justify-center.flex-shrink-0\n               {:class \"w-[20px] h-[20px] mr-[4px]\"}\n               (if loading?\n                 [:svg.animate-spin.h-3.w-3.text-slate-500.dark:text-slate-400\n                  {:xmlns \"http://www.w3.org/2000/svg\" :fill \"none\" :viewBox \"0 0 24 24\"}\n                  [:circle.opacity-25 {:cx \"12\" :cy \"12\" :r \"10\" :stroke \"currentColor\" :stroke-width \"4\"}]\n                  [:path.opacity-75 {:fill \"currentColor\" :d \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"}]]\n                 (if emoji\n                   [:div emoji]\n                   [:svg.h-4.w-4\n                    {:xmlns \"http://www.w3.org/2000/svg\" :fill \"none\" :viewBox \"0 0 24 24\" :stroke \"currentColor\"\n                     :class (theme-class theme :icon)}\n                    [:path {:stroke-linecap \"round\" :stroke-linejoin \"round\" :stroke-width \"2\" :d \"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"}]]))]\n              [:div\n               (if emoji\n                 (subs label (count emoji))\n                 label)]])\n           (when (and (seq items) expanded?)\n             [:div.ml-3\n              [navbar-items !state items (vec (conj update-at i :items))]])]))\n      items))))\n\n(defn navbar [!state]\n  (let [{:keys [items theme toc]} @!state\n        items? (seq items)]\n    [:div.relative.overflow-x-hidden.h-full\n     (when items?\n       [:div.absolute.left-0.top-0.w-full.h-full.overflow-y-auto.transform.transition.pb-10\n        {:class (str (theme-class theme :project) \" \"\n                     (if toc \"-translate-x-full\" \"translate-x-0\"))}\n        [:div.px-3.mb-1\n         {:class (theme-class theme :heading)}\n         \"Project\"]\n        [navbar-items !state (:items @!state) [:items]]])\n     [:div.absolute.left-0.top-0.w-full.h-full.overflow-y-auto.transform\n      {:class (str (when items? \"transition \")\n                   (theme-class theme :toc) \" \"\n                   (if toc \"translate-x-0\" \"translate-x-full\"))}\n      (if (and (seq items) (seq toc))\n        [:div.px-3.py-1.cursor-pointer\n         {:class (theme-class theme :back)\n          :on-click #(swap! !state dissoc :toc)}\n         \"\u2190 Back to project\"]\n        [:div.px-3.mb-1\n         {:class (theme-class theme :heading)}\n         \"TOC\"])\n      [toc-items !state toc (when (< (count toc) 2) {:class \"font-medium\"})]]]))\n\n(defn toggle-button [!state content & [opts]]\n  (let [{:keys [mobile? mobile-open? open?]} @!state]\n    [:div\n     (merge {:on-click #(swap! !state assoc\n                               (if mobile? :mobile-open? :open?) (if mobile? (not mobile-open?) (not open?))\n                               :animation-mode (if mobile? :slide-over :push-in))} opts)\n     content]))\n\n(def spring {:type :spring :duration 0.35 :bounce 0.1})\n\n(defn panel [!state content]\n  (r/with-let [{:keys [local-storage-key]} @!state\n               component-key (or local-storage-key (gensym))\n               resize #(swap! !state assoc :mobile? (< js/innerWidth 640) :mobile-open? false)\n               ref-fn #(if %\n                         (do\n                           (when local-storage-key\n                             (add-watch !state ::persist\n                                        (fn [_ _ old {:keys [open?]}]\n                                          (when (not= (:open? old) open?)\n                                            (ls/set-item! local-storage-key open?)))))\n                           (js/addEventListener \"resize\" resize)\n                           (resize))\n                         (js/removeEventListener \"resize\" resize))]\n    (let [{:keys [animation-mode hide-toggle? open? mobile-open? mobile? mobile-width theme width]} @!state\n          w (if mobile? mobile-width width)]\n      [:div.flex.h-screen\n       {:ref ref-fn}\n       [:> motion/animate-presence\n        {:initial false}\n        (when (and mobile? mobile-open?)\n          [:> motion/div\n           {:key (str component-key \"-backdrop\")\n            :class \"fixed z-10 bg-gray-500 bg-opacity-75 left-0 top-0 bottom-0 right-0\"\n            :initial {:opacity 0}\n            :animate {:opacity 1}\n            :exit {:opacity 0}\n            :on-click #(swap! !state assoc :mobile-open? false)\n            :transition spring}])\n        (when (or mobile-open? (and (not mobile?) open?))\n          [:> motion/div\n           {:key (str component-key \"-nav\")\n            :style {:width w}\n            :class (str \"h-screen z-10 flex-shrink-0 fixed \"\n                        (theme-class theme :slide-over) \" \"\n                        (when mobile?\n                          (theme-class theme :slide-over-unpinned)))\n            :initial (if (= animation-mode :slide-over) {:x (* w -1)} {:margin-left (* w -1)})\n            :animate (if (= animation-mode :slide-over) {:x 0} {:margin-left 0})\n            :exit (if (= animation-mode :slide-over) {:x (* w -1)} {:margin-left (* w -1)})\n            :transition spring\n            :on-animation-start #(swap! !state assoc :animating? true)\n            :on-animation-complete #(swap! !state assoc :animating? false)}\n           (when-not hide-toggle?\n             [toggle-button !state\n              (if mobile?\n                [:svg.h-5.w-5 {:xmlns \"http://www.w3.org/2000/svg\" :fill \"none\" :viewBox \"0 0 24 24\" :stroke \"currentColor\" :stroke-width \"2\"}\n                 [:path {:stroke-linecap \"round\" :stroke-linejoin \"round\" :d \"M6 18L18 6M6 6l12 12\"}]]\n                [:svg.w-4.w-4 {:xmlns \"http://www.w3.org/2000/svg\" :fill \"none\" :viewBox \"0 0 24 24\" :stroke \"currentColor\" :stroke-width \"2\"}\n                 [:path {:stroke-linecap \"round\" :stroke-linejoin \"round\" :d \"M15 19l-7-7 7-7\"}]])\n              {:class (theme-class theme :toggle)}])\n           content])]])))\n"]}
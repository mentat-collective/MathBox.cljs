{"version":3,"sources":["nextjournal/clerk/viewer.cljc"],"mappings":"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","names":["this__5343__auto__","k__5344__auto__","this__5345__auto__","k55963","else__5346__auto__","G__55979","cljs.core/Keyword","form","cljs.core.get","__extmap","this__5363__auto__","f__5364__auto__","init__5365__auto__","cljs.core.reduce","ret__5366__auto__","p__55981","vec__55982","k__5367__auto__","cljs.core.nth","v__5368__auto__","this__5358__auto__","writer__5359__auto__","opts__5360__auto__","pr-pair__5361__auto__","keyval__5362__auto__","cljs.core/pr-sequential-writer","cljs.core.concat","cljs.core/PersistentVector","G__55962","cljs.core/RecordIter","cljs.core/-iterator","cljs.core/nil-iter","this__5341__auto__","__meta","this__5338__auto__","__hash","this__5347__auto__","cljs.core/count","this__5339__auto__","h__5154__auto__","coll__5340__auto__","cljs.core/hash-unordered-coll","this55964","other55965","cljs.core._EQ_","this__5353__auto__","k__5354__auto__","cljs.core/contains?","cljs.core.dissoc","cljs.core/-with-meta","cljs.core.into","cljs.core/not-empty","this__5350__auto__","G__55994","this__5351__auto__","k__5352__auto__","pred__55998","cljs.core/keyword-identical?","expr__55999","cljs.core.assoc","this__5356__auto__","cljs.core/seq","cljs.core/MapEntry","this__5342__auto__","this__5348__auto__","entry__5349__auto__","cljs.core/vector?","cljs.core/-nth","cljs.core/-conj","nextjournal.clerk.viewer/ViewerEval","this__5389__auto__","cljs.core/List","writer__5390__auto__","cljs.core/-write","G__55969","extmap__5385__auto__","G__56007","cljs.core/record?","nextjournal.clerk.viewer/->ViewerEval","nextjournal.clerk.viewer/map->ViewerEval","k56009","G__56014","f","p__56015","vec__56016","G__56008","this56010","other56011","G__56027","pred__56030","expr__56031","unused__23066__auto__","self__","G__56039","js/Error","args56013","cljs.core/aclone","nextjournal.clerk.viewer/ViewerFn","G__56012","G__56050","nextjournal.clerk.viewer/->ViewerFn","nextjournal.clerk.viewer/map->ViewerFn","this","x","fexpr__56045","y","fexpr__56046","nextjournal.clerk.viewer/viewer-fn?","nextjournal.clerk.viewer/viewer-eval?","nextjournal.clerk.viewer/resolve-symbol-alias","aliases","sym","temp__5802__auto__","full-ns","G__56051","cljs.core/namespace","cljs.core.symbol","cljs.core/name","nextjournal.clerk.viewer/resolve-aliases","p1__56054#","clojure.walk/postwalk","G__56055","cljs.core/Symbol","nextjournal.clerk.viewer/->viewer-fn","cljs.core/eval","nextjournal.clerk.viewer/->viewer-eval","nextjournal.clerk.viewer/open-graph-metas","open-graph-properties","cljs.core.map","p__56059","vec__56060","prop","content","cljs.core/PROTOCOL_SENTINEL","obj","w","_opts","cljs.core.pr_str","nextjournal.clerk.viewer/data-readers","nextjournal.clerk.viewer/wrapped-value?","and__5043__auto__","cljs.core/map?","e56076","_e","var_args","G__56079","nextjournal.clerk.viewer/ensure-wrapped","v","nextjournal.clerk.viewer.ensure_wrapped","nextjournal.clerk.viewer/->value","nextjournal.clerk.viewer/->viewer","nextjournal.clerk.viewer/->viewers","nextjournal.clerk.viewer/width","nextjournal.clerk.viewer/css-class","nextjournal.clerk.viewer/viewer-opts-normalization","p1__56084#","cljs.core.keyword","nextjournal.clerk.viewer/throw-when-viewer-opts-invalid","opts","cljs.core.ex_info","temp__5804__auto__","width","css-class","nextjournal.clerk.viewer/normalize-viewer-opts","clojure.set/rename-keys","nextjournal.clerk.viewer/normalize-viewer","viewer","cljs.core/seq?","cljs.core/fn?","G__56099","nextjournal.clerk.viewer/with-viewer","nextjournal.clerk.viewer.with_viewer","viewer-opts","cljs.core.merge","args__5775__auto__","len__5769__auto__","i__5770__auto__","argseq__5776__auto__","cljs.core/IndexedSeq","nextjournal.clerk.viewer/with-viewer-extracting-opts","seq56103","G__56104","cljs.core/first","cljs.core/next","self__5754__auto__","opts+items","cljs.core/not","cljs.core/rest","cljs.core/sequential?","cljs.core.apply","cljs.core.partial","nextjournal.clerk.viewer/with-viewers","viewers","G__56111","nextjournal.clerk.viewer/get-safe","p1__56109#","key","nextjournal.clerk.viewer.get_safe","map","e56112","nextjournal.clerk.viewer/rpad-vec","length","padding","cljs.core/vec","cljs.core.take","cljs.core.repeat","nextjournal.clerk.viewer/missing-pred","nextjournal.clerk.viewer/normalize-seq-of-seq","s","max-count","cljs.core/max-key","p1__56114#","cljs.core.mapv","nextjournal.clerk.viewer/normalize-seq-of-map","ks","cljs.core.mapcat","cljs.core/keys","cljs.core.distinct","m","p1__56115#","nextjournal.clerk.viewer/normalize-map-of-seq","m*","p__56117","vec__56118","acc","k","cljs.core.range","cljs.core/val","cljs.core.comp","i","p1__56116#","cljs.core.get_in","p__56122","map__56123","cljs.core/--destructure-map","nextjournal.clerk.viewer/normalize-seq-to-vec","head","rows","G__56124","nextjournal.clerk.viewer/use-headers","map__56125","table","cljs.core.update","nextjournal.clerk.viewer/normalize-table-data","data","cljs.core/vals","nextjournal.clerk.viewer/demunge-ex-data","ex-data","G__56127","traces","p1__56126#","cljs.core/demunge","cljs.core/pr-str","nextjournal.clerk.viewer/inspect-fn","nextjournal.clerk.viewer/mark-presented","wrapped-value","nextjournal.clerk.viewer/mark-preserve-keys","nextjournal.clerk.viewer/fetch-all","_xs","nextjournal.clerk.viewer/datafied?","nextjournal.clerk.viewer/with-md-viewer","map__56128","_node","type","nextjournal.clerk.viewer/into-markup","markup","p__56130","map__56131","p__56132","map__56133","node","text","G__56134","p1__56129#","G__56135","nextjournal.clerk.viewer/apply-viewers","nextjournal.clerk.viewer/process-wrapped-value","nextjournal.clerk.viewer/update-val","seq56138","G__56139","args","cljs.core/update","nextjournal.clerk.viewer/var-from-def?","cljs.core/var?","nextjournal.clerk.viewer/var-from-def-viewer","cljs.core/deref","p__56140","map__56141","nextjournal.clerk.viewer/apply-viewer-unwrapping-var-from-def","result","value","map__56142","value+viewer","unwrap-var","var-from-def?","G__56143","nextjournal.clerk.viewer/get-default-viewers","nextjournal.clerk.viewer/!viewers","nextjournal.clerk.viewer/default-viewers","G__56181","nextjournal.clerk.viewer/get-viewers","scope","nextjournal.clerk.viewer.get_viewers","or__5045__auto__","fexpr__56185","p__56188","map__56189","nextjournal.clerk.viewer/transform-result","_cell","doc","map__56190","map__56191","auto-expand-results?","inline-results?","bundle?","blob-id","blob-mode","_","presented-result","G__56193","nextjournal.clerk.viewer/present","G__56195","G__56196","nextjournal.clerk.viewer/ensure-wrapped-with-viewers","cljs.core/*ns*","opts-from-form-meta","cljs.core/select-keys","G__56197","p1__56187#","G__56198","cljs.core/meta","nextjournal.clerk.viewer/hide-result-viewer","p__56200","map__56201","nextjournal.clerk.viewer/->display","code-cell","visibility","map__56204","code","cljs.core.not_EQ_","p__56205","map__56206","nextjournal.clerk.viewer/with-block-viewer","cell","G__56207","map__56209","display-opts","code?","result?","G__56210","cljs.core.conj","nextjournal.clerk.viewer/result-viewer","nextjournal.clerk.viewer/update-viewers","select-fn->update-fn","p__56211","vec__56212","pred","update-fn","G__56215","G__56218","nextjournal.clerk.viewer/add-viewers","added-viewers","nextjournal.clerk.viewer.add_viewers","nextjournal.clerk.viewer/table-missing-viewer","nextjournal.clerk.viewer/table-markup-viewer","nextjournal.clerk.viewer/table-head-viewer","nextjournal.clerk.viewer/table-body-viewer","nextjournal.clerk.viewer/table-row-viewer","nextjournal.clerk.viewer/update-table-viewers","p1__56234#","p1__56235#","p1__56236#","cljs.core/string?","cljs.core/number?","p1__56242#","nextjournal.clerk.viewer/markdown-viewers","p__56252","map__56253","attrs","heading-level","nextjournal.markdown.transform/->text","p1__56243#","p1__56244#","p1__56245#","p__56262","map__56263","p1__56248#","nextjournal.markdown.transform/table-alignment","p1__56249#","p__56264","map__56265","nextjournal.clerk.viewer/char-viewer","cljs.core/char?","nextjournal.clerk.viewer/string-viewer","nextjournal.clerk.viewer/number-viewer","nextjournal.clerk.viewer/number-hex-viewer","nextjournal.clerk.viewer/symbol-viewer","cljs.core/symbol?","nextjournal.clerk.viewer/keyword-viewer","cljs.core/keyword?","nextjournal.clerk.viewer/nil-viewer","cljs.core/nil?","nextjournal.clerk.viewer/boolean-viewer","cljs.core/boolean?","nextjournal.clerk.viewer/map-entry-viewer","cljs.core/map-entry?","nextjournal.clerk.viewer/read+inspect-viewer","nextjournal.clerk.viewer/vector-viewer","nextjournal.clerk.viewer/set-viewer","cljs.core/set?","nextjournal.clerk.viewer/sequential-viewer","nextjournal.clerk.viewer/map-viewer","nextjournal.clerk.viewer/var->symbol","sci.lang/Var","nextjournal.clerk.viewer/var-viewer","p1__56269#","cljs.core.some_fn","nextjournal.clerk.viewer/throwable-viewer","e","clojure.datafy/datafy","p1__56274#","nextjournal.clerk.viewer/ideref-viewer","cljs.core/native-satisfies?","cljs.core/IDeref","ideref","cljs.core/type","deref-as-map","js/cljs","js/cljs.core","js/cljs.core.deref-as-map","cljs.core/Var","cljs.core/deref-as-map","nextjournal.clerk.viewer/regex-viewer","cljs.core/regexp?","regex","nextjournal.clerk.viewer/fallback-viewer","cljs.core/constantly","p1__56278#","nextjournal.clerk.viewer/elision-viewer","nextjournal.clerk.viewer/katex-viewer","nextjournal.clerk.viewer/mathjax-viewer","p__56279","map__56280","nextjournal.clerk.viewer/transform-html","path","!path","cljs.core.atom","hiccup","G__56284","G__56285","p","cljs.core.swap_BANG_","cljs.core/inc","nextjournal.clerk.viewer/html-viewer","nextjournal.clerk.viewer/plotly-viewer","nextjournal.clerk.viewer/vega-lite-viewer","nextjournal.clerk.viewer/markdown-viewer","p1__56287#","G__56288","nextjournal.markdown/parse","nextjournal.clerk.viewer/code-viewer","clojure.string/trim","sb__5690__auto__","goog.string/StringBuffer","*print-newline*-orig-val__56295","cljs.core/*print-newline*","*print-fn*-orig-val__56296","cljs.core/*print-fn*","*print-newline*-temp-val__56297","*print-fn*-temp-val__56298","x__5691__auto__","cljs.pprint.pprint","nextjournal.clerk.viewer/code-folded-viewer","*print-newline*-orig-val__56305","*print-fn*-orig-val__56306","*print-newline*-temp-val__56307","*print-fn*-temp-val__56308","nextjournal.clerk.viewer/reagent-viewer","nextjournal.clerk.viewer/row-viewer","nextjournal.clerk.viewer/col-viewer","nextjournal.clerk.viewer/table-viewer","map__56311","p1__56309#","cljs.core.map_indexed","cljs.core/vector","p1__56310#","cljs.core.keep","cljs.core/second","G__56312","cljs.core/cons","nextjournal.clerk.viewer/table-error-viewer","nextjournal.clerk.viewer/code-block-viewer","p__56319","map__56322","nextjournal.clerk.viewer/tagged-value-viewer","p1__56325#","nextjournal.clerk.viewer/js-promise-viewer","js/Promise","nextjournal.clerk.viewer/js-object-viewer","goog/isObject","o","cljs.core.remove","goog/typeOf","obj56326","applied-science.js-interop.impl/wrap-key","js/undefined","e56327","obj56329","js/Object.keys","nextjournal.clerk.viewer/js-array-viewer","cljs.core/js-iterable?","p__56334","map__56335","nextjournal.clerk.viewer/extract-sync-atom-vars","_doc","blocks","p__56336","map__56337","var","nextjournal.clerk.viewer/atom-var-name->state","p1__56341#","p1__56342#","cljs.core.juxt","p__56343","map__56344","nextjournal.clerk.viewer/process-blocks","ns","cljs.core/into","nextjournal.clerk.viewer/apply-viewers*","nextjournal.clerk.viewer/notebook-viewer","p__56345","map__56346","nextjournal.clerk.viewer/viewer-eval-viewer","nextjournal.clerk.viewer/buffered-image-viewer","js/nextjournal","js/nextjournal.clerk","js/nextjournal.clerk.viewer","js/nextjournal.clerk.viewer.!viewers","reagent.ratom.atom","nextjournal.clerk.viewer/rank-val","val","cljs.core/reduce-kv","res","idx","cljs.core/ifn?","cljs.core/reduced","nextjournal.clerk.viewer/resilient-compare","a","b","e56347","cljs.core/compare","nextjournal.clerk.viewer/ensure-sorted","xs","cljs.core/sorted?","cljs.core.sort_by","cljs.core.sort","nextjournal.clerk.viewer/find-viewer","select-fn","cljs.core.filter","nextjournal.clerk.viewer/find-named-viewer","viewer-name","nextjournal.clerk.viewer/viewer-for","selected-viewer","p__56358","map__56359","G__56363","nextjournal.clerk.viewer.ensure_wrapped_with_viewers","x-viewers","nextjournal.clerk.viewer/->opts","cljs.core/empty?","map__56364","render-fn","transform-fn","transformed-value","G__56366","wrapped-value'","G__56367","nextjournal.clerk.viewer/count-viewers","p1__56369#","G__56370","nextjournal.clerk.viewer/bounded-count-opts","n","limit","total","e56371","cljs.core/bounded-count","G__56372","p__56374","map__56375","nextjournal.clerk.viewer/drop+take-xf","offset","G__56376","cljs.core.drop","cljs.core/int?","p__56377","map__56378","nextjournal.clerk.viewer/process-render-fn","G__56379","nextjournal.clerk.viewer/hash-sha1","hasher","js/goog.crypt.Sha1","goog.crypt/stringToUtf8ByteArray","nextjournal.clerk.viewer/process-viewer","nextjournal.clerk.viewer/processed-keys","cljs.core/set","cljs.core.disj","nextjournal.clerk.viewer/make-elision","fetch-opts","nextjournal.clerk.viewer/find-elision","desc","p1__56381#","cljs.core/tree-seq","G__56382","nextjournal.clerk.viewer/->fetch-opts","nextjournal.clerk.viewer/get-elision","map__56388","nextjournal.clerk.viewer/get-fetch-opts-n","p__56391","map__56393","nextjournal.clerk.viewer/inherit-opts","path-segment","cljs.core.fnil","cljs.core/conj","p__56397","map__56399","nextjournal.clerk.viewer/present+paginate-children","preserve-keys?","!budget","budget","map__56402","map__56403","paginate?","fetch-opts'","G__56405","cljs.core/min","children","p__56412","vec__56415","G__56418","nextjournal.clerk.viewer/present*","cljs.core/identity","G__56424","elision","unbounded?","new-offset","G__56429","cljs.core/peek","G__56430","p__56435","map__56436","nextjournal.clerk.viewer/present+paginate-string","map__56438","x__5133__auto__","y__5134__auto__","G__56441","cljs.core.subs","p__56448","map__56449","current-path","map__56450","presented?","descend?","p1__56444#","x__5130__auto__","y__5131__auto__","G__56453","cljs.core/associative?","cljs.core/seqable?","nextjournal.clerk.viewer/assign-content-lengths","map__56464","map__56465","name","opening-paren","closing-paren","elision-content-length","cljs.core/+","p1__56456#","p1__56458#","p__56476","p__56477","map__56478","map__56479","nextjournal.clerk.viewer/compute-expanded-at","state","indents","expanded-at","prev-type","content-length","max-length","expanded?","state'","p__56480","map__56481","nextjournal.clerk.viewer/collect-expandable-paths","cljs.core/assoc-in","p__56482","map__56483","nextjournal.clerk.viewer/assign-expanded-at","G__56491","nextjournal.clerk.viewer.present","G__56492","nextjournal.clerk.viewer/assign-closing-parens","nextjournal.clerk.viewer/desc->values","cljs.core/with-meta","cljs.core/coll?","G__56498","cljs.core/empty","nextjournal.clerk.viewer/path-to-value","cljs.core.interleave","nextjournal.clerk.viewer/merge-presentations","root","more","cljs.core.update_in","map__56502","path-from-value","path-from-more","cljs.core/pop","G__56509","nextjournal.clerk.viewer.assign_closing_parens","closing-parens","closing","non-leaf?","defer-closing?","cljs.core/last","G__56514","cljs.core/dissoc","G__56518","G__56523","nextjournal.clerk.viewer/reset-viewers!","nextjournal.clerk.viewer.reset_viewers_BANG_","fexpr__56542","cljs.core/assoc","nextjournal.clerk.viewer/add-viewers!","nextjournal.clerk.viewer/html","nextjournal.clerk.viewer/md","nextjournal.clerk.viewer/plotly","nextjournal.clerk.viewer/vl","nextjournal.clerk.viewer/table","nextjournal.clerk.viewer/row","nextjournal.clerk.viewer/col","nextjournal.clerk.viewer/tex","nextjournal.clerk.viewer/notebook","nextjournal.clerk.viewer/code","nextjournal.clerk.viewer/doc-url","nextjournal.clerk.viewer/print-hide-result-deprecation-warning","G__56572","nextjournal.clerk.viewer/hide-result","nextjournal.clerk.viewer/eval-cljs-result-viewer","nextjournal.clerk.viewer/eval-cljs-str","code-string","nextjournal.clerk.viewer/example-viewer","nextjournal.clerk.viewer/examples-viewer","examples"],"sourcesContent":["(ns nextjournal.clerk.viewer\n  (:require [clojure.string :as str]\n            [clojure.pprint :as pprint]\n            [clojure.datafy :as datafy]\n            [clojure.set :as set]\n            [clojure.walk :as w]\n            #?@(:clj [[babashka.fs :as fs]\n                      [clojure.repl :refer [demunge]]\n                      [editscript.edit]\n                      [multihash.core :as multihash]\n                      [multihash.digest :as digest]\n                      [nextjournal.clerk.config :as config]\n                      [nextjournal.clerk.analyzer :as analyzer]]\n                :cljs [[goog.crypt]\n                       [goog.crypt.Sha1]\n                       [reagent.ratom :as ratom]\n                       [sci.impl.vars]\n                       [sci.lang]\n                       [applied-science.js-interop :as j]])\n            [nextjournal.markdown :as md]\n            [nextjournal.markdown.transform :as md.transform])\n  #?(:clj (:import (com.pngencoder PngEncoder)\n                   (clojure.lang IDeref IAtom)\n                   (java.lang Throwable)\n                   (java.awt.image BufferedImage)\n                   (java.util Base64)\n                   (java.nio.file Files StandardOpenOption))))\n\n(defrecord ViewerEval [form])\n\n(defrecord ViewerFn [form #?(:cljs f)]\n  #?@(:cljs [IFn\n             (-invoke [this x] ((:f this) x))\n             (-invoke [this x y] ((:f this) x y))]))\n\n;; Make sure `ViewerFn` and `ViewerEval` is changed atomically\n#?(:clj\n   (extend-protocol editscript.edit/IType\n     ViewerFn\n     (get-type [_] :val)\n\n     ViewerEval\n     (get-type [_] :val)))\n\n(defn viewer-fn? [x]\n  (instance? ViewerFn x))\n\n(defn viewer-eval? [x]\n  (instance? ViewerEval x))\n\n(defn resolve-symbol-alias [aliases sym]\n  (if-let [full-ns (some->> sym namespace symbol (get aliases) str)]\n    (symbol full-ns (name sym))\n    sym))\n\n#_(resolve-symbol-alias {'v (find-ns 'nextjournal.clerk.viewer)} 'nextjournal.clerk.render/render-code)\n\n(defn resolve-aliases [aliases form]\n  (w/postwalk #(cond->> %\n                 (symbol? %) (resolve-symbol-alias aliases))\n              form))\n\n(defn ->viewer-fn [form]\n  (map->ViewerFn {:form #?(:clj (cond->> form *ns* (resolve-aliases (ns-aliases *ns*))) :cljs form)\n                  #?@(:cljs [:f (eval form)])}))\n\n(defn ->viewer-eval [form]\n  (map->ViewerEval {:form #?(:clj (cond->> form *ns* (resolve-aliases (ns-aliases *ns*))) :cljs form)}))\n\n(defn open-graph-metas [open-graph-properties]\n  (into (list [:meta {:name \"twitter:card\" :content \"summary_large_image\"}])\n        (map (fn [[prop content]] [:meta {:property (str \"og:\" (name prop)) :content content}]))\n        open-graph-properties))\n\n#?(:clj\n   (defmethod print-method ViewerFn [v ^java.io.Writer w]\n     (.write w (str \"#viewer-fn \" (pr-str `~(:form v))))))\n\n#?(:clj\n   (defmethod print-method ViewerEval [v ^java.io.Writer w]\n     (.write w (str \"#viewer-eval \" (pr-str `~(:form v)))))\n   :cljs\n   (extend-type ViewerEval\n     IPrintWithWriter\n     (-pr-writer [obj w _opts]\n       (-write w (str \"#viewer-eval \"))\n       (-write w (pr-str (:form obj))))))\n\n(def data-readers\n  {'viewer-fn ->viewer-fn\n   'viewer-eval ->viewer-eval})\n\n#_(binding [*data-readers* {'viewer-fn ->viewer-fn}]\n    (read-string (pr-str (->viewer-fn '(fn [x] x)))))\n#_(binding [*data-readers* {'viewer-fn ->viewer-fn}]\n    (read-string (pr-str (->viewer-fn 'number?))))\n\n(comment\n  (def num? (->viewer-fn 'number?))\n  (num? 42)\n  (:form num?)\n  (pr-str num?))\n\n(defn wrapped-value?\n  \"Tests if `x` is a map containing a `:nextjournal/value`.\"\n  [x]\n  (and (map? x) ;; can throw for `sorted-map`\n       (try (contains? x :nextjournal/value)\n            (catch #?(:clj Exception :cljs js/Error) _e false))))\n\n(defn ensure-wrapped\n  \"Ensures `x` is wrapped in a map under a `:nextjournal/value` key.\"\n  ([x] (if (wrapped-value? x) x {:nextjournal/value x}))\n  ([x v] (-> x ensure-wrapped (assoc :nextjournal/viewer v))))\n\n#_(ensure-wrapped 123)\n#_(ensure-wrapped {:nextjournal/value 456})\n\n(defn ->value\n  \"Takes `x` and returns the `:nextjournal/value` from it, or otherwise `x` unmodified.\"\n  [x]\n  (if (wrapped-value? x)\n    (:nextjournal/value x)\n    x))\n\n#_(->value (with-viewer :code '(+ 1 2 3)))\n#_(->value 123)\n\n(defn ->viewer\n  \"Returns the `:nextjournal/viewer` for a given wrapped value `x`, `nil` otherwise.\"\n  [x]\n  (when (wrapped-value? x)\n    (:nextjournal/viewer x)))\n\n\n#_(->viewer (with-viewer :code '(+ 1 2 3)))\n#_(->viewer \"123\")\n\n(defn ->viewers\n  \"Returns the `:nextjournal/viewers` for a given wrapped value `x`, `nil` otherwise.\"\n  [x]\n  (when (wrapped-value? x)\n    (:nextjournal/viewers x)))\n\n(defn width\n  \"Returns the `:nextjournal/width` for a given wrapped value `x`, `nil` otherwise.\"\n  [x]\n  (when (wrapped-value? x)\n    (:nextjournal/width x)))\n\n(defn css-class\n  \"Returns the `:nextjournal/css-class` for a given wrapped value `x`, `nil` otherwise.\"\n  [x]\n  (when (wrapped-value? x)\n    (:nextjournal/css-class x)))\n\n\n(def viewer-opts-normalization\n  (into {}\n        (map #(vector (keyword \"nextjournal.clerk\" (name %))\n                      (keyword \"nextjournal\"       (name %))))\n        [:viewer :viewers :opts :width :css-class]))\n\n(defn throw-when-viewer-opts-invalid [opts]\n  (when-not (map? opts)\n    (throw (ex-info \"normalize-viewer-opts not passed `map?` opts\" {:opts opts})))\n  (when-let [width (:nextjournal/width opts)]\n    (when-not (contains? #{:full :wide :prose} width)\n      (throw (ex-info \"Invalid `:nextjournal.clerk/width`, allowed values are `:full`, `:wide` and `:prose`.\" {:width width})))\n    (when-let [css-class (:nextjournal/css-class opts)]\n      (throw (ex-info \"Conflicting viewer options `:nextjournal.clerk/width` and `:nextjournal.clerk/css-class`. Please remove either one.\"\n                      {:width width :css-class css-class}))))\n  opts)\n\n(defn normalize-viewer-opts [opts]\n  (throw-when-viewer-opts-invalid (set/rename-keys opts viewer-opts-normalization)))\n\n(defn normalize-viewer [viewer]\n  (cond (keyword? viewer) viewer\n        (map? viewer) viewer\n        (or (symbol? viewer) (seq? viewer) #?(:cljs (fn? viewer))) {:render-fn viewer}\n        #?@(:clj [(fn? viewer) {:transform-fn viewer}])\n        :else (throw (ex-info \"cannot normalize viewer\" {:viewer viewer}))))\n\n#_(normalize-viewer '#(vector :h3 \"Hello \" % \"!\"))\n#_(normalize-viewer :latex)\n#_(normalize-viewer {:render-fn '#(vector :h3 \"Hello \" % \"!\") :transform-fn identity})\n\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n;; public api\n\n(defn with-viewer\n\"Wraps the given value `x` and associates it with the given `viewer`. Takes an optional second `viewer-opts` arg.\"\n  ([viewer x] (with-viewer viewer nil x))\n  ([viewer viewer-opts x]\n   (merge (when viewer-opts (normalize-viewer-opts viewer-opts))\n          (-> x\n              ensure-wrapped\n              (assoc :nextjournal/viewer (normalize-viewer viewer))))))\n\n;; TODO: Think of a better name\n(defn with-viewer-extracting-opts [viewer & opts+items]\n  ;; TODO: maybe support sequantial & viewer-opts?\n  (cond\n    (and (map? (first opts+items)) (not (wrapped-value? (first opts+items))))\n    (with-viewer viewer (first opts+items) (rest opts+items))\n\n    (and (sequential? (first opts+items)) (= 1 (count opts+items)))\n    (apply (partial with-viewer viewer) opts+items)\n\n    :else\n    (with-viewer viewer opts+items)))\n\n#_(with-viewer :latex \"x^2\")\n#_(with-viewer '#(vector :h3 \"Hello \" % \"!\") \"x^2\")\n\n(defn with-viewers\n  \"Binds viewers to types, eg {:boolean view-fn}\"\n  [viewers x]\n  (-> x\n      ensure-wrapped\n      (assoc :nextjournal/viewers viewers)))\n\n#_(->> \"x^2\" (with-viewer :latex) (with-viewers [{:name :latex :render-fn :mathjax}]))\n\n(defn get-safe\n  ([key] #(get-safe % key))\n  ([map key]\n   (when (map? map)\n     (try (get map key) ;; can throw for e.g. sorted-map\n          (catch #?(:clj Exception :cljs js/Error) _e nil)))))\n\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n;; table viewer normalization\n\n(defn rpad-vec [v length padding]\n  (vec (take length (concat v (repeat padding)))))\n\n(def missing-pred\n  :nextjournal/missing)\n\n(defn normalize-seq-of-seq [s]\n  (let [max-count (count (apply max-key count s))]\n    {:rows (mapv #(rpad-vec (->value %) max-count missing-pred) s)}))\n\n(defn normalize-seq-of-map [s]\n  (let [ks (->> s (mapcat keys) distinct vec)]\n    {:head ks\n     :rows (mapv (fn [m] (mapv #(get m % missing-pred) ks)) s)}))\n\n\n(defn normalize-map-of-seq [m]\n  (let [ks (-> m keys vec)\n        m* (if (seq? (get m (first ks)))\n             (reduce (fn [acc [k s]] (assoc acc k (vec s))) {} m)\n             m)]\n    {:head ks\n     :rows (->> (range (count (val (apply max-key (comp count val) m*))))\n              (mapv (fn [i] (mapv #(get-in m* [% i] missing-pred) ks))))}))\n\n(defn normalize-seq-to-vec [{:keys [head rows]}]\n  (cond-> {:rows (vec rows)}\n    head (assoc :head (vec head))))\n\n(defn use-headers [s]\n  (let [{:as table :keys [rows]} (normalize-seq-of-seq s)]\n    (-> table\n        (assoc :head (first rows))\n        (update :rows rest))))\n\n(defn normalize-table-data [data]\n  (cond\n    (and (map? data) (-> data (get-safe :rows) sequential?)) (normalize-seq-to-vec data)\n    (and (map? data) (sequential? (first (vals data)))) (normalize-map-of-seq data)\n    (and (sequential? data) (map? (first data))) (normalize-seq-of-map data)\n    (and (sequential? data) (sequential? (first data))) (normalize-seq-of-seq data)\n    :else nil))\n\n(defn demunge-ex-data [ex-data]\n  (cond-> ex-data\n    (map? ex-data)\n    (update :trace (fn [traces] (mapv #(update % 0 (comp demunge pr-str)) traces)))))\n\n#_(demunge-ex-data (datafy/datafy (ex-info \"foo\" {:bar :baz})))\n\n(declare present present* !viewers apply-viewers apply-viewers* ensure-wrapped-with-viewers process-viewer process-wrapped-value default-viewers find-named-viewer)\n\n(defn inspect-fn []\n  #?(:clj (->viewer-eval 'nextjournal.clerk.render/inspect-presented)\n     :cljs (eval 'nextjournal.clerk.render/inspect-presented)))\n\n(defn mark-presented [wrapped-value]\n  (assoc wrapped-value :nextjournal/presented? true))\n\n(defn mark-preserve-keys [wrapped-value]\n  (assoc wrapped-value :nextjournal/preserve-keys? true))\n\n(defn fetch-all [_opts _xs]\n  (throw (ex-info \"`fetch-all` is deprecated, please use a `:transform-fn` with `mark-presented` instead.\" {})))\n\n(def datafied?\n  (get-safe :nextjournal.clerk/datafied))\n\n(defn with-md-viewer [wrapped-value]\n  (let [{:as _node :keys [type]} (->value wrapped-value)]\n    (when-not type\n      (throw (ex-info \"no type given for with-md-viewer\" {:wrapped-value wrapped-value})))\n    (with-viewer (keyword \"nextjournal.markdown\" (name type)) wrapped-value)))\n\n(defn into-markup [markup]\n  (fn [{:as wrapped-value :nextjournal/keys [viewers]}]\n    (-> (with-viewer {:name :html- :render-fn 'identity} wrapped-value)\n        mark-presented\n        (update :nextjournal/value\n                (fn [{:as node :keys [text content]}]\n                  (into (cond-> markup (fn? markup) (apply [node]))\n                        (cond text [text]\n                              content (mapv #(-> (with-md-viewer %)\n                                                 (assoc :nextjournal/viewers viewers)\n                                                 (apply-viewers)\n                                                 (as-> w\n                                                     (if (= :html- (:name (->viewer w)))\n                                                       (->value w)\n                                                       [(inspect-fn) (process-wrapped-value w)])))\n                                            content))))))))\n\n;; A hack for making Clerk not fail in the precense of\n;; programmatically generated keywords or symbols that cannot be read.\n;;\n;; Unfortunately there's currently no solution to override\n;; `print-method` locally, see\n;; https://clojurians.slack.com/archives/C03S1KBA2/p1667334982789659\n\n#?(:clj (defn roundtrippable? [x]\n          (= x (-> x str read-string))))\n\n#?(:clj\n   (defmethod print-method clojure.lang.Keyword [o w]\n     (if (roundtrippable? o)\n       (.write w (str o))\n       (.write w (pr-str (->viewer-eval (if-let [ns (namespace o)]\n                                          (list 'keyword ns (name o))\n                                          (list 'keyword (name o)))))))))\n\n#?(:clj\n   (defmethod print-method clojure.lang.Symbol [o w]\n     (if (or (roundtrippable? o)\n             (= (name o) \"?@\")) ;; splicing reader conditional, see issue #338\n       (.write w (str o))\n       (.write w (pr-str (->viewer-eval (if-let [ns (namespace o)]\n                                          (list 'symbol ns (name o))\n                                          (list 'symbol (name o)))))))))\n\n#?(:clj\n   (defn ->edn [x]\n     (binding [*print-namespace-maps* false\n               *print-length* nil\n               *print-level* nil]\n       (pr-str x))))\n\n#_(->edn {:nextjournal/value :foo})\n#_(->edn {(keyword \"with spaces\") :foo})\n\n(defn update-val [f & args]\n  (fn [wrapped-value] (apply update wrapped-value :nextjournal/value f args)))\n\n#_((update-val + 1) {:nextjournal/value 41})\n\n(defn var-from-def? [x]\n  (var? (get-safe x :nextjournal.clerk/var-from-def)))\n\n(def var-from-def-viewer\n  {:pred var-from-def?\n   :transform-fn (update-val (comp deref :nextjournal.clerk/var-from-def))})\n\n(defn apply-viewer-unwrapping-var-from-def\n  \"Applies the `viewer` (if set) to the given result `result`. In case\n  the `value` is a `var-from-def?` it will be unwrapped unless the\n  viewer opts out with a truthy `:nextjournal.clerk/var-from-def`.\"\n  [{:as result :nextjournal/keys [value viewer]}]\n  (if viewer\n    (let [value+viewer (if (or (var? viewer) (fn? viewer))\n                         (viewer value)\n                         {:nextjournal/value value\n                          :nextjournal/viewer (normalize-viewer viewer)})\n          {unwrap-var :transform-fn var-from-def? :pred} var-from-def-viewer]\n      (assoc result :nextjournal/value (cond-> value+viewer\n                                         (and (var-from-def? value)\n                                              (-> value+viewer ->viewer :var-from-def? not))\n                                         unwrap-var)))\n    result))\n\n#?(:clj\n   (defn base64-encode-value [{:as result :nextjournal/keys [content-type]}]\n     (update result :nextjournal/value (fn [data] (str \"data:\" content-type \";base64,\"\n                                                       (.encodeToString (Base64/getEncoder) data))))))\n\n#?(:clj\n   (defn store+get-cas-url! [{:keys [out-path ext]} content]\n     (assert out-path) (assert ext)\n     (let [cas-url (str \"_data/\" (multihash/base58 (digest/sha2-512 content)) \".\" ext)\n           cas-path (fs/path out-path cas-url)]\n       (fs/create-dirs (fs/parent cas-path))\n       (when-not (fs/exists? cas-path)\n         (Files/write cas-path content (into-array [StandardOpenOption/CREATE])))\n       cas-url)))\n\n#?(:clj\n   (defn relative-root-prefix-from [path]\n     (str/join (repeat (get (frequencies (str path)) \\/ 0) \"../\"))))\n\n#?(:clj\n   (defn map-index [{:as _opts :keys [index]} path]\n     (get {index \"index.clj\"} path path)))\n\n#?(:clj\n   (defn maybe-store-result-as-file [{:as doc+blob-opts :keys [out-path file]} {:as result :nextjournal/keys [content-type value]}]\n     ;; TODO: support customization via viewer api\n     (if-let [image-type (second (re-matches #\"image/(\\w+)\" content-type))]\n       (assoc result :nextjournal/value\n              (str (relative-root-prefix-from (map-index doc+blob-opts file))\n                   (store+get-cas-url! (assoc doc+blob-opts :ext image-type) value)))\n       result)))\n\n#_(nextjournal.clerk.builder/build-static-app! {:paths [\"image.clj\" \"notebooks/image.clj\" \"notebooks/viewers/image.clj\"] :bundle? false :browse? false})\n#_(nextjournal.clerk.builder/build-static-app! {:paths [\"image.clj\" \"notebooks/image.clj\" \"notebooks/viewers/image.clj\"] :browse? false})\n\n#?(:clj\n   (defn process-blobs [{:as doc+blob-opts :keys [blob-mode blob-id]} presented-result]\n     (w/postwalk #(if (get % :nextjournal/content-type)\n                    (case blob-mode\n                      :lazy-load (assoc % :nextjournal/value {:blob-id blob-id :path (:path %)})\n                      :inline (base64-encode-value %)\n                      :file (maybe-store-result-as-file doc+blob-opts %))\n                    %)\n                 presented-result)))\n\n(defn get-default-viewers []\n  (:default @!viewers default-viewers))\n\n(defn get-viewers\n  ([scope] (get-viewers scope nil))\n  ([scope value]\n   (or (when value (->viewers value))\n       (when scope (@!viewers scope))\n       (get-default-viewers))))\n\n#_(get-viewers nil nil)\n\n(declare result-viewer)\n\n(defn transform-result [{:as _cell :keys [doc result form]}]\n  (let [{:keys [auto-expand-results? inline-results? bundle?]} doc\n        {:nextjournal/keys [value blob-id viewers]} result\n        blob-mode (cond\n                    (and (not inline-results?) blob-id) :lazy-load\n                    bundle? :inline ;; TODO: provide a separte setting for this\n                    :else :file)\n        #?(:clj blob-opts :cljs _) (assoc doc :blob-mode blob-mode :blob-id blob-id)\n        presented-result (->> (present (ensure-wrapped-with-viewers (or viewers (get-viewers *ns*)) value))\n                              #?(:clj (process-blobs blob-opts)))\n        opts-from-form-meta (-> result\n                                (select-keys [:nextjournal/css-class :nextjournal/width :nextjournal/opts])\n                                (cond-> #_result\n                                  (some? auto-expand-results?) (update :nextjournal/opts #(merge {:auto-expand-results? auto-expand-results?} %))))]\n    (merge {:nextjournal/value (cond-> {:nextjournal/presented presented-result}\n\n                                 (-> form meta :nextjournal.clerk/open-graph :image)\n                                 (assoc :nextjournal/open-graph-image-capture true)\n\n                                 #?@(:clj [(= blob-mode :lazy-load)\n                                           (assoc :nextjournal/fetch-opts {:blob-id blob-id}\n                                                  :nextjournal/hash (analyzer/->hash-str [blob-id presented-result opts-from-form-meta]))]))}\n           (dissoc presented-result :nextjournal/value :nextjournal/viewer :nextjournal/viewers)\n           opts-from-form-meta)))\n\n#_(nextjournal.clerk.view/doc->viewer @nextjournal.clerk.webserver/!doc)\n\n(def hide-result-viewer\n  {:name :hide-result :transform-fn (fn [_] nil)})\n\n(defn ->display [{:as code-cell :keys [result visibility]}]\n  (let [{:keys [code result]} visibility]\n    {:result? (not= :hide result)\n     :fold? (= code :fold)\n     :code? (not= :hide code)}))\n\n#_(->display {:result {:nextjournal.clerk/visibility {:code :show :result :show}}})\n#_(->display {:result {:nextjournal.clerk/visibility {:code :fold :result :show}}})\n#_(->display {:result {:nextjournal.clerk/visibility {:code :fold :result :hide}}})\n\n(defn with-block-viewer [doc {:as cell :keys [type]}]\n  (case type\n    :markdown [(with-viewer :markdown (:doc cell))]\n    :code (let [cell (update cell :result apply-viewer-unwrapping-var-from-def)\n                {:as display-opts :keys [code? result?]} (->display cell)]\n            ;; TODO: use vars instead of names\n            (cond-> []\n              code?\n              (conj (with-viewer :clerk/code-block {:nextjournal.clerk/opts (select-keys cell [:loc])}\n                      ;; TODO: display analysis could be merged into cell earlier\n                      (-> cell (merge display-opts) (dissoc :result))))\n              result?\n              (conj (with-viewer (:name result-viewer)\n                      (assoc cell :doc doc)))))))\n\n(defn update-viewers [viewers select-fn->update-fn]\n  (reduce (fn [viewers [pred update-fn]]\n            (mapv (fn [viewer]\n                    (cond-> viewer\n                      (pred viewer) update-fn)) viewers))\n          viewers\n          select-fn->update-fn))\n\n#_(update-viewers default-viewers {:page-size #(dissoc % :page-size)})\n\n(defn add-viewers\n  ([added-viewers] (add-viewers (get-default-viewers) added-viewers))\n  ([viewers added-viewers] (into (vec added-viewers) viewers)))\n\n(def table-missing-viewer {:pred #{:nextjournal/missing} :render-fn '(fn [x] [:<>])})\n\n(def table-markup-viewer\n  {:name :table/markup\n   :render-fn '(fn [head+body opts]\n                 [:div\n                  (into [nextjournal.clerk.render/render-table-with-sticky-header]\n                        (nextjournal.clerk.render/inspect-children opts)\n                        head+body)])})\n\n(def table-head-viewer\n  {:name :table/head\n   :render-fn '(fn [header-row {:as opts :keys [path number-col?]}]\n                 [:thead\n                  (into [:tr]\n                        (map-indexed (fn [i {:as header-cell :nextjournal/keys [value]}]\n                                       (let [title (when (or (string? value) (keyword? value) (symbol? value))\n                                                     value)]\n                                         [:th.pl-6.pr-2.py-1.align-bottom.font-medium.top-0.z-10.bg-white.dark:bg-slate-900.border-b.border-gray-300.dark:border-slate-700\n                                          (cond-> {:class (when (and (ifn? number-col?) (number-col? i)) \"text-right\")} title (assoc :title title))\n                                          [:div.flex.items-center (nextjournal.clerk.render/inspect-presented opts header-cell)]]))) header-row)])})\n\n(def table-body-viewer\n  {:name :table/body :page-size 20\n   :render-fn '(fn [rows opts] (into [:tbody] (map-indexed (fn [idx row] (nextjournal.clerk.render/inspect-presented (update opts :path conj idx) row))) rows))})\n\n(def table-row-viewer\n  {:name :table/row\n   :render-fn '(fn [row {:as opts :keys [path number-col?]}]\n                 (into [:tr.hover:bg-gray-200.dark:hover:bg-slate-700\n                        {:class (if (even? (peek path)) \"bg-black/5 dark:bg-gray-800\" \"bg-white dark:bg-gray-900\")}]\n                       (map-indexed (fn [idx cell] [:td.pl-6.pr-2.py-1 (when (and (ifn? number-col?) (number-col? idx)) {:class \"text-right\"}) (nextjournal.clerk.render/inspect-presented opts cell)])) row))})\n\n(defn update-table-viewers [viewers]\n  (-> viewers\n      (update-viewers {(comp #{string?} :pred) #(assoc % :render-fn 'nextjournal.clerk.render/render-string)\n                       (comp #{number?} :pred) #(assoc % :render-fn '(fn [x] [:span.tabular-nums (if (js/Number.isNaN x) \"NaN\" (str x))]))\n                       (comp #{:elision} :name) #(assoc % :render-fn '(fn [{:as fetch-opts :keys [total offset unbounded?]} {:keys [num-cols]}]\n                                                                        [nextjournal.clerk.render/consume-view-context\n                                                                         :fetch-fn\n                                                                         (fn [fetch-fn]\n                                                                           [:tr.border-t.dark:border-slate-700\n                                                                            [:td.py-1.relative\n                                                                             {:col-span num-cols\n                                                                              :class (if (fn? fetch-fn)\n                                                                                       \"bg-indigo-50 hover:bg-indigo-100 dark:bg-gray-800 dark:hover:bg-slate-700 cursor-pointer\"\n                                                                                       \"text-gray-400 text-slate-500\")\n                                                                              :on-click (fn [_] (when (fn? fetch-fn)\n                                                                                                 (fetch-fn fetch-opts)))}\n                                                                             [:span.sticky\n                                                                              {:style {:left \"min(50vw, 50%)\"} :class \"-translate-x-1/2\"}\n                                                                              (- total offset) (when unbounded? \"+\") (if (fn? fetch-fn) \" more\u2026\" \" more elided\")]]])]))})\n      (add-viewers [table-missing-viewer\n                    table-markup-viewer\n                    table-head-viewer\n                    table-body-viewer\n                    table-row-viewer])))\n\n#?(:clj (def utc-date-format ;; from `clojure.instant/thread-local-utc-date-format`\n          (doto (java.text.SimpleDateFormat. \"yyyy-MM-dd'T'HH:mm:ss.SSS-00:00\")\n            (.setTimeZone (java.util.TimeZone/getTimeZone \"GMT\")))))\n\n#?(:clj\n   (defn datafy-scope [scope]\n     (cond\n       (instance? clojure.lang.Namespace scope) {:namespace (-> scope str keyword)}\n       (keyword? scope) scope\n       :else (throw (ex-info (str \"Unsupported scope \" scope) {:scope scope})))))\n\n#_(datafy-scope *ns*)\n#_(datafy-scope #'datafy-scope)\n\n(def markdown-viewers\n  [{:name :nextjournal.markdown/doc :transform-fn (into-markup [:div.viewer-markdown])}\n\n   ;; blocks\n   {:name :nextjournal.markdown/heading\n    :transform-fn (into-markup\n                   (fn [{:keys [attrs heading-level]}]\n                     [(str \"h\" heading-level) attrs]))}\n   {:name :nextjournal.markdown/image :transform-fn #(with-viewer :html [:img.inline (-> % ->value :attrs)])}\n   {:name :nextjournal.markdown/blockquote :transform-fn (into-markup [:blockquote])}\n   {:name :nextjournal.markdown/paragraph :transform-fn (into-markup [:p])}\n   {:name :nextjournal.markdown/plain :transform-fn (into-markup [:<>])}\n   {:name :nextjournal.markdown/ruler :transform-fn (into-markup [:hr])}\n   {:name :nextjournal.markdown/code\n    :transform-fn (fn [wrapped-value] (with-viewer :html\n                                        [:div.viewer-code (with-viewer :code\n                                                            (md.transform/->text (->value wrapped-value)))]))}\n\n   ;; marks\n   {:name :nextjournal.markdown/em :transform-fn (into-markup [:em])}\n   {:name :nextjournal.markdown/strong :transform-fn (into-markup [:strong])}\n   {:name :nextjournal.markdown/monospace :transform-fn (into-markup [:code])}\n   {:name :nextjournal.markdown/strikethrough :transform-fn (into-markup [:s])}\n   {:name :nextjournal.markdown/link :transform-fn (into-markup #(vector :a (:attrs %)))}\n   {:name :nextjournal.markdown/internal-link :transform-fn (into-markup #(vector :a {:href (str \"#\" (:text %))}))}\n   {:name :nextjournal.markdown/hashtag :transform-fn (into-markup #(vector :a {:href (str \"#\" (:text %))}))}\n\n   ;; inlines\n   {:name :nextjournal.markdown/text :transform-fn (into-markup [:span])}\n   {:name :nextjournal.markdown/softbreak :transform-fn (fn [_] (with-viewer :html [:span \" \"]))}\n   #?(:clj {:name :nextjournal.markdown/inline :transform-fn (comp eval read-string md.transform/->text)})\n\n   ;; formulas\n   {:name :nextjournal.markdown/formula\n    :transform-fn (comp :text ->value)\n    :render-fn '(fn [tex] (nextjournal.clerk.render/render-katex tex {:inline? true}))}\n   {:name :nextjournal.markdown/block-formula\n    :transform-fn (comp :text ->value)\n    :render-fn 'nextjournal.clerk.render/render-katex}\n\n   ;; lists\n   {:name :nextjournal.markdown/bullet-list :transform-fn (into-markup [:ul])}\n   {:name :nextjournal.markdown/numbered-list :transform-fn (into-markup [:ol])}\n   {:name :nextjournal.markdown/todo-list :transform-fn (into-markup [:ul.contains-task-list])}\n   {:name :nextjournal.markdown/list-item :transform-fn (into-markup [:li])}\n   {:name :nextjournal.markdown/todo-item\n    :transform-fn (into-markup (fn [{:keys [attrs]}] [:li [:input {:type \"checkbox\" :default-checked (:checked attrs)}]]))}\n\n   ;; tables\n   {:name :nextjournal.markdown/table :transform-fn (into-markup [:table])}\n   {:name :nextjournal.markdown/table-head :transform-fn (into-markup [:thead])}\n   {:name :nextjournal.markdown/table-body :transform-fn (into-markup [:tbody])}\n   {:name :nextjournal.markdown/table-row :transform-fn (into-markup [:tr])}\n   {:name :nextjournal.markdown/table-header\n    :transform-fn (into-markup #(vector :th {:style (md.transform/table-alignment (:attrs %))}))}\n   {:name :nextjournal.markdown/table-data\n    :transform-fn (into-markup #(vector :td {:style (md.transform/table-alignment (:attrs %))}))}\n\n   ;; ToC via [[TOC]] placeholder ignored\n   {:name :nextjournal.markdown/toc :transform-fn (into-markup [:div.toc])}\n\n   ;; sidenotes\n   {:name :nextjournal.markdown/sidenote\n    :transform-fn (into-markup (fn [{:keys [attrs]}] [:span.sidenote [:sup {:style {:margin-right \"3px\"}} (-> attrs :ref inc)]]))}\n   {:name :nextjournal.markdown/sidenote-ref\n    :transform-fn (into-markup [:sup.sidenote-ref])}])\n\n(def char-viewer\n  {:pred char? :render-fn '(fn [c] [:span.cmt-string.inspected-value \"\\\\\" c])})\n\n(def string-viewer\n  {:pred string?\n   :render-fn 'nextjournal.clerk.render/render-quoted-string\n   :opening-paren \"\\\"\"\n   :closing-paren \"\\\"\"\n   :page-size 80})\n\n(def number-viewer\n  {:pred number?\n   :render-fn 'nextjournal.clerk.render/render-number\n   #?@(:clj [:transform-fn (update-val #(cond-> %\n                                          (or (instance? clojure.lang.Ratio %)\n                                              (instance? clojure.lang.BigInt %)) pr-str))])})\n\n(def number-hex-viewer\n  {:name :number-hex :render-fn '(fn [num] (nextjournal.clerk.render/render-number (str \"0x\" (.toString (js/Number. num) 16))))})\n\n(def symbol-viewer\n  {:pred symbol? :render-fn '(fn [x] [:span.cmt-keyword.inspected-value (str x)])})\n\n(def keyword-viewer\n  {:pred keyword? :render-fn '(fn [x] [:span.cmt-atom.inspected-value (str x)])})\n\n(def nil-viewer\n  {:pred nil? :render-fn '(fn [_] [:span.cmt-default.inspected-value \"nil\"])})\n\n(def boolean-viewer\n  {:pred boolean? :render-fn '(fn [x] [:span.cmt-bool.inspected-value (str x)])})\n\n(def map-entry-viewer\n  {:pred map-entry? :name :map-entry :render-fn '(fn [xs opts] (into [:<>] (comp (nextjournal.clerk.render/inspect-children opts) (interpose \" \")) xs)) :page-size 2})\n\n(def read+inspect-viewer\n  {:name :read+inspect :render-fn '(fn [x] (try [nextjournal.clerk.render/inspect (read-string x)]\n                                                (catch js/Error _e\n                                                  (nextjournal.clerk.render/render-unreadable-edn x))))})\n\n(def vector-viewer\n  {:pred vector? :render-fn 'nextjournal.clerk.render/render-coll :opening-paren \"[\" :closing-paren \"]\" :page-size 20})\n\n(def set-viewer\n  {:pred set? :render-fn 'nextjournal.clerk.render/render-coll :opening-paren \"#{\" :closing-paren \"}\" :page-size 20})\n\n(def sequential-viewer\n  {:pred sequential? :render-fn 'nextjournal.clerk.render/render-coll :opening-paren \"(\" :closing-paren \")\" :page-size 20})\n\n(def map-viewer\n  {:pred map? :name :map :render-fn 'nextjournal.clerk.render/render-map :opening-paren \"{\" :closing-paren \"}\" :page-size 10})\n\n#?(:cljs (defn var->symbol [v] (if (instance? sci.lang.Var v) (sci.impl.vars/toSymbol v) (symbol v))))\n\n(def var-viewer\n  {:pred (some-fn var? #?(:cljs #(instance? sci.lang.Var %)))\n   :transform-fn (comp #?(:cljs var->symbol :clj symbol) ->value)\n   :render-fn '(fn [x] [:span.inspected-value [:span.cmt-meta \"#'\" (str x)]])})\n\n(def throwable-viewer\n  {:name :error\n   :render-fn 'nextjournal.clerk.render/render-throwable\n   :pred (fn [e] (instance? #?(:clj Throwable :cljs js/Error) e))\n   :transform-fn (comp mark-presented (update-val (comp demunge-ex-data datafy/datafy)))})\n\n(def buffered-image-viewer #?(:clj {:pred #(instance? BufferedImage %)\n                                    :transform-fn (fn [{image :nextjournal/value}]\n                                                    (let [w (.getWidth image)\n                                                          h (.getHeight image)\n                                                          r (float (/ w h))]\n                                                      (-> {:nextjournal/value (.. (PngEncoder.)\n                                                                                  (withBufferedImage image)\n                                                                                  (withCompressionLevel 1)\n                                                                                  (toBytes))\n                                                           :nextjournal/content-type \"image/png\"\n                                                           :nextjournal/width (if (and (< 2 r) (< 900 w)) :full :wide)}\n                                                          mark-presented)))\n                                    :render-fn '(fn [blob] [:figure.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob)}]])}))\n\n(def ideref-viewer\n  {:pred #(#?(:clj instance? :cljs satisfies?) IDeref %)\n   :transform-fn (update-val (fn [ideref]\n                               (with-viewer :tagged-value\n                                 {:tag \"object\"\n                                  :value (vector (symbol (pr-str (type ideref)))\n                                                 #?(:clj (with-viewer :number-hex (System/identityHashCode ideref)))\n                                                 (if-let [deref-as-map (resolve 'clojure.core/deref-as-map)]\n                                                   (deref-as-map ideref)\n                                                   (deref ideref)))})))})\n\n(def regex-viewer\n  {:pred #?(:clj (partial instance? java.util.regex.Pattern) :cljs regexp?)\n   :transform-fn (fn [wrapped-value] (with-viewer :tagged-value {:tag \"\" :value (let [regex (->value wrapped-value)]\n                                                                                  #?(:clj (.pattern regex) :cljs (.-source regex)))}))})\n\n(def fallback-viewer\n  {:pred (constantly :true) :transform-fn (update-val #(with-viewer :read+inspect (pr-str %)))})\n\n(def elision-viewer\n  {:name :elision :render-fn 'nextjournal.clerk.render/render-elision :transform-fn mark-presented})\n\n(def katex-viewer\n  {:name :latex :render-fn 'nextjournal.clerk.render/render-katex :transform-fn mark-presented})\n\n(def mathjax-viewer\n  {:name :mathjax :render-fn 'nextjournal.clerk.render/render-mathjax :transform-fn mark-presented})\n\n(defn transform-html [{:as wrapped-value :keys [path]}]\n  (let [!path (atom -1)]\n    (update wrapped-value\n            :nextjournal/value\n            (fn [hiccup]\n              (if (string? hiccup)\n                [:div {:dangerouslySetInnerHTML {:__html hiccup}}]\n                (w/postwalk (fn [x] (if (wrapped-value? x)\n                                      [(inspect-fn)\n                                       (present x (let [p (conj path (swap! !path inc))]\n                                                    {:current-path p :path p}))]\n                                      x))\n                            hiccup))))))\n\n(def html-viewer\n  {:name :html\n   :render-fn 'identity\n   :transform-fn (comp mark-presented transform-html)})\n\n#_(present (with-viewer html-viewer [:div {:nextjournal/value (range 30)} {:nextjournal/value (range 30)}]))\n\n(def plotly-viewer\n  {:name :plotly :render-fn 'nextjournal.clerk.render/render-plotly :transform-fn mark-presented})\n\n(def vega-lite-viewer\n  {:name :vega-lite :render-fn 'nextjournal.clerk.render/render-vega-lite :transform-fn mark-presented})\n\n(def markdown-viewer\n  {:name :markdown :transform-fn (fn [wrapped-value]\n                                   (-> wrapped-value\n                                       mark-presented\n                                       (update :nextjournal/value #(cond->> % (string? %) md/parse))\n                                       (update :nextjournal/viewers add-viewers markdown-viewers)\n                                       (with-md-viewer)))})\n\n(def code-viewer\n  {:name :code :render-fn 'nextjournal.clerk.render/render-code :transform-fn (comp mark-presented (update-val (fn [v] (if (string? v) v (str/trim (with-out-str (pprint/pprint v)))))))})\n\n(def code-folded-viewer\n  {:name :code-folded :render-fn 'nextjournal.clerk.render/render-folded-code :transform-fn (comp mark-presented (update-val (fn [v] (if (string? v) v (with-out-str (pprint/pprint v))))))})\n\n(def reagent-viewer\n  {:name :reagent :render-fn 'nextjournal.clerk.render/render-reagent :transform-fn mark-presented})\n\n(def row-viewer\n  {:name :row :render-fn '(fn [items opts]\n                            (let [item-count (count items)]\n                              (into [:div {:class \"md:flex md:flex-row md:gap-4 not-prose\"\n                                           :style opts}]\n                                    (map (fn [item]\n                                           [:div.flex.items-center.justify-center.flex-auto\n                                            (nextjournal.clerk.render/inspect-presented opts item)])) items)))})\n\n(def col-viewer\n  {:name :col :render-fn '(fn [items opts]\n                            (into [:div {:class \"md:flex md:flex-col md:gap-4 clerk-grid not-prose\"\n                                         :style opts}]\n                                  (map (fn [item]\n                                         [:div.flex.items-center.justify-center\n                                          (nextjournal.clerk.render/inspect-presented opts item)])) items))})\n\n(def table-viewer\n  {:name :table\n   :transform-fn (fn [wrapped-value]\n                   (if-let [{:keys [head rows]} (normalize-table-data (->value wrapped-value))]\n                     (-> wrapped-value\n                         (assoc :nextjournal/viewer :table/markup)\n                         (update :nextjournal/width #(or % :wide))\n                         (update :nextjournal/viewers update-table-viewers)\n                         (assoc :nextjournal/opts {:num-cols (count (or head (first rows)))\n                                                   :number-col? (into #{}\n                                                                      (comp (map-indexed vector)\n                                                                            (keep #(when (number? (second %)) (first %))))\n                                                                      (not-empty (first rows)))})\n                         (assoc :nextjournal/value (cond->> []\n                                                     (seq rows) (cons (with-viewer :table/body (map (partial with-viewer :table/row) rows)))\n                                                     head (cons (with-viewer (:name table-head-viewer table-head-viewer) head)))))\n                     (-> wrapped-value\n                         mark-presented\n                         (assoc :nextjournal/width :wide)\n                         (assoc :nextjournal/value [(present wrapped-value)])\n                         (assoc :nextjournal/viewer {:render-fn 'nextjournal.clerk.render/render-table-error}))))})\n\n(def table-error-viewer\n  {:name :table-error :render-fn 'nextjournal.clerk.render/render-table-error :page-size 1})\n\n(def code-block-viewer\n  {:name :clerk/code-block :transform-fn (fn [{:as wrapped-value :nextjournal/keys [value]}]\n                                           (-> wrapped-value\n                                               (assoc :nextjournal/viewer (if (:fold? value) :code-folded :code))\n                                               (update :nextjournal/value :text)))})\n\n(def tagged-value-viewer\n  {:name :tagged-value\n   :render-fn '(fn [{:keys [tag value space?]} opts]\n                 (nextjournal.clerk.render/render-tagged-value\n                  {:space? (:nextjournal/value space?)}\n                  (str \"#\" (:nextjournal/value tag))\n                  [nextjournal.clerk.render/inspect-presented value]))\n   :transform-fn mark-preserve-keys})\n\n\n#?(:cljs\n   (def js-promise-viewer\n     {:name :js-promise :pred #(instance? js/Promise %) :render-fn 'nextjournal.clerk.render/render-promise}))\n\n#?(:cljs\n   (def js-object-viewer\n     {:name :js-array\n      :pred goog/isObject\n      :page-size 20\n      :opening-paren \"{\" :closing-paren \"}\"\n      :render-fn '(fn [v opts] (nextjournal.clerk.render/render-tagged-value {:space? true}\n                                                                             \"#js\"\n                                                                             (nextjournal.clerk.render/render-map v opts)))\n      :transform-fn (update-val (fn [^js o]\n                                  (into {}\n                                        (comp (remove (fn [k] (identical? \"function\" (goog/typeOf (j/get o k)))))\n                                              (map (fn [k]\n                                                     [(symbol k)\n                                                      (try (let [v (j/get o k)]\n                                                             (.-constructor v) ;; test for SecurityError\n                                                             ;; https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy\n                                                             v)\n                                                           (catch js/Error _ 'forbidden))]))) (js/Object.keys o))))}))\n\n#?(:cljs\n   (def js-array-viewer\n     {:name :js-array\n      :pred js-iterable?\n      :transform-fn (update-val seq)\n      :render-fn '(fn [v opts]\n                    (nextjournal.clerk.render/render-tagged-value {:space? true}\n                                                                  \"#js\"\n                                                                  (nextjournal.clerk.render/render-coll v opts)))\n      :opening-paren \"[\" :closing-paren \"]\"\n      :page-size 20}))\n\n(def result-viewer\n  {:name :clerk/result\n   :render-fn 'nextjournal.clerk.render/render-result\n   :transform-fn (comp mark-presented (update-val transform-result))})\n\n#?(:clj\n   (defn edn-roundtrippable? [x]\n     (= x (-> x ->edn read-string))))\n\n#?(:clj\n   (defn throw-if-sync-var-is-invalid [var]\n     (when-not (instance? IAtom @var)\n       (throw (ex-info \"Clerk cannot sync non-atom values. Vars meant for sync need to hold clojure atom values.\"\n                       {:var var :value @var}\n                       (IllegalArgumentException.))))\n     (try (when-not (edn-roundtrippable? @@var)\n            (throw (IllegalArgumentException.)))\n          (catch Exception ex\n            (throw (ex-info \"Clerk can only sync values which can be round-tripped in EDN.\"\n                            {:var var :value @var}\n                            ex))))))\n\n(defn extract-sync-atom-vars [{:as _doc :keys [blocks]}]\n  (into #{}\n        (keep (fn [{:keys [result form]}]\n                (when-let [var (-> result :nextjournal/value (get-safe :nextjournal.clerk/var-from-def))]\n                  (when (contains? (meta form) :nextjournal.clerk/sync)\n                    #?(:clj (throw-if-sync-var-is-invalid var))\n                    var))))\n        blocks))\n\n(defn atom-var-name->state [doc]\n  (->viewer-eval\n   (list 'nextjournal.clerk.render/intern-atoms!\n         (into {}\n               (map (juxt #(list 'quote (symbol %)) #(->> % deref deref (list 'quote))))\n               (extract-sync-atom-vars doc)))))\n\n(defn process-blocks [viewers {:as doc :keys [ns]}]\n  (-> doc\n      (assoc :atom-var-name->state (atom-var-name->state doc))\n      (update :blocks (partial into [] (comp (mapcat (partial with-block-viewer doc))\n                                             (map (comp process-wrapped-value\n                                                        apply-viewers*\n                                                        (partial ensure-wrapped-with-viewers viewers))))))\n      (select-keys [:atom-var-name->state :auto-expand-results? :blocks :bundle? :css-class :open-graph :title :toc :toc-visibility])\n      #?(:clj (cond-> ns (assoc :scope (datafy-scope ns))))))\n\n(def notebook-viewer\n  {:name :clerk/notebook\n   :render-fn 'nextjournal.clerk.render/render-notebook\n   :transform-fn (fn [{:as wrapped-value :nextjournal/keys [viewers]}]\n                   (-> wrapped-value\n                       (update :nextjournal/value (partial process-blocks viewers))\n                       mark-presented))})\n\n(def viewer-eval-viewer\n  {:pred viewer-eval?\n   :var-from-def? true\n   :transform-fn (comp mark-presented\n                       (update-val\n                        (fn [x]\n                          (cond (viewer-eval? x) x\n                                (seq? x) (->viewer-eval x)\n                                (symbol? x) (->viewer-eval x)\n                                (var? x) (->viewer-eval (list 'resolve (list 'quote (symbol x))))\n                                (var-from-def? x) (recur (-> x :nextjournal.clerk/var-from-def symbol))))))\n   :render-fn '(fn [x opts]\n                 (if (nextjournal.clerk.render/reagent-atom? x) ;; special atoms handling to support reactivity\n                   [nextjournal.clerk.render/render-tagged-value {:space? false}\n                    \"#object\"\n                    [nextjournal.clerk.render/inspect [(symbol (pr-str (type x))) @x]]]\n                   [nextjournal.clerk.render/inspect x]))})\n\n(def default-viewers\n  ;; maybe make this a sorted-map\n  [char-viewer\n   string-viewer\n   number-viewer\n   number-hex-viewer\n   symbol-viewer\n   keyword-viewer\n   nil-viewer\n   boolean-viewer\n   map-entry-viewer\n   var-from-def-viewer\n   read+inspect-viewer\n   vector-viewer\n   set-viewer\n   sequential-viewer\n   viewer-eval-viewer\n   map-viewer\n   var-viewer\n   throwable-viewer\n   buffered-image-viewer\n   ideref-viewer\n   regex-viewer\n   #?(:cljs js-promise-viewer)\n   #?(:cljs js-array-viewer)\n   #?(:cljs js-object-viewer)\n   fallback-viewer\n   elision-viewer\n   katex-viewer\n   mathjax-viewer\n   html-viewer\n   plotly-viewer\n   vega-lite-viewer\n   markdown-viewer\n   code-viewer\n   code-folded-viewer\n   reagent-viewer\n   row-viewer\n   col-viewer\n   table-viewer\n   table-error-viewer\n   code-block-viewer\n   result-viewer\n   tagged-value-viewer\n   notebook-viewer\n   hide-result-viewer])\n\n(defonce\n  ^{:doc \"atom containing a map of and per-namespace viewers or `:defaults` overridden viewers.\"}\n  !viewers\n  (#?(:clj atom :cljs ratom/atom) {}))\n\n#_(reset! !viewers {})\n\n;; heavily inspired by code from Thomas Heller in shadow-cljs, see\n;; https://github.com/thheller/shadow-cljs/blob/1708acb21bcdae244b50293d17633ce35a78a467/src/main/shadow/remote/runtime/obj_support.cljc#L118-L144\n\n(defn rank-val [val]\n  (reduce-kv (fn [res idx pred]\n               (if (and (ifn? pred) (pred val)) (reduced idx) res))\n             -1\n             (into [] (map :pred) default-viewers)))\n\n(defn resilient-compare [a b]\n  (try\n    (compare a b)\n    (catch #?(:clj Exception :cljs js/Error) _e\n      (compare (rank-val a) (rank-val b)))))\n\n(defn ensure-sorted [xs]\n  (cond\n    (sorted? xs) xs\n    (map? xs) (sort-by first resilient-compare xs)\n    (set? xs) (sort resilient-compare xs)\n    :else xs))\n\n\n(defn find-viewer [viewers select-fn]\n  (first (filter select-fn viewers)))\n\n#_(find-viewer default-viewers (comp #{string?} :pred))\n#_(find-viewer default-viewers (comp #{:elision} :name))\n\n(defn find-named-viewer [viewers viewer-name]\n  (find-viewer viewers (comp #{viewer-name} :name)))\n\n#_(find-named-viewer default-viewers :elision)\n\n(defn viewer-for [viewers x]\n  (or (when-let [selected-viewer (->viewer x)]\n        (if (keyword? selected-viewer)\n          (or (find-named-viewer viewers selected-viewer)\n              (throw (ex-info (str \"cannot find viewer named \" selected-viewer)\n                              {:selected-viewer selected-viewer :viewers viewers})))\n          selected-viewer))\n      (find-viewer viewers (let [v (->value x)]\n                             (fn [{:keys [pred]}]\n                               (and (ifn? pred) (pred v)))))\n      (throw (ex-info (str \"cannot find matching viewer for value\")\n                      {:value (->value x) :viewers viewers :x x}))))\n\n#_(viewer-for default-viewers [1 2 3])\n#_(viewer-for default-viewers {:nextjournal/value [1 2 3]})\n#_(viewer-for default-viewers 42)\n#_(viewer-for default-viewers (with-viewer :html [:h1 \"Hello Hiccup\"]))\n#_(viewer-for default-viewers (with-viewer {:transform-fn identity} [:h1 \"Hello Hiccup\"]))\n\n(defn ensure-wrapped-with-viewers\n  ([x] (ensure-wrapped-with-viewers (get-viewers *ns*) x))\n  ([viewers x]\n   (-> x\n       ensure-wrapped\n       (update :nextjournal/viewers (fn [x-viewers] (or x-viewers viewers))))))\n\n#_(ensure-wrapped-with-viewers 42)\n#_(ensure-wrapped-with-viewers {:nextjournal/value 42 :nextjournal/viewers [:boo]})\n\n(defn ->opts [wrapped-value]\n  (select-keys wrapped-value [:nextjournal/css-class :nextjournal/width :nextjournal/opts :!budget :budget :path :current-path :offset]))\n\n(defn apply-viewers* [wrapped-value]\n  (when (empty? (->viewers wrapped-value))\n    (throw (ex-info \"cannot apply empty viewers\" {:wrapped-value wrapped-value})))\n  (let [viewers (->viewers wrapped-value)\n        {:as viewer :keys [render-fn transform-fn]} (viewer-for viewers wrapped-value)\n        transformed-value (ensure-wrapped-with-viewers viewers\n                                                       (cond-> (dissoc wrapped-value :nextjournal/viewer)\n                                                         transform-fn transform-fn))\n        wrapped-value' (cond-> transformed-value\n                         (-> transformed-value ->value wrapped-value?)\n                         (merge (->value transformed-value)))]\n    (if (and transform-fn (not render-fn))\n      (recur wrapped-value')\n      (-> wrapped-value'\n          (assoc :nextjournal/viewer viewer)\n          (merge (->opts wrapped-value))))))\n\n(defn apply-viewers [x]\n  (apply-viewers* (ensure-wrapped-with-viewers x)))\n\n#_(apply-viewers 42)\n#_(apply-viewers {:one :two})\n#_(apply-viewers {:one :two})\n#_(apply-viewers [1 2 3])\n#_(apply-viewers (range 3))\n#_(apply-viewers (clojure.java.io/file \"notebooks\"))\n#_(apply-viewers (md \"# Hello\"))\n#_(apply-viewers (html [:h1 \"hi\"]))\n#_(apply-viewers (with-viewer :elision {:remaining 10 :count 30 :offset 19}))\n#_(apply-viewers (with-viewer (->Form '(fn [name] (html [:<> \"Hello \" name]))) \"James\"))\n#_(apply-viewers (with-viewers [{:pred (constantly true) :render-fn '(fn [x] [:h1 \"hi\"])}] 42))\n\n(defn count-viewers\n  \"Helper function to walk a given `x` and replace the viewers with their counts. Useful for debugging.\"\n  [x]\n  (w/postwalk #(if (wrapped-value? %)\n                 (cond-> (dissoc % :!budget)\n                   (:nextjournal/viewers %)\n                   (-> #_%\n                       (update :nextjournal/viewers count)\n                       (set/rename-keys {:nextjournal/viewers :nextjournal/viewers-count})))\n                 %) x))\n\n(defn bounded-count-opts [n xs]\n  (when-not (number? n)\n    (throw (ex-info \"n must be a number?\" {:n n :xs xs})))\n  (let [limit (+ n #?(:clj config/*bounded-count-limit* :cljs 10000))\n        total (try (bounded-count limit xs)\n                   (catch #?(:clj Exception :cljs js/Error) _\n                     nil))]\n    (cond-> {}\n      total (assoc :total total)\n      (or (not total) (= total limit)) (assoc :unbounded? true))))\n\n#_(bounded-count-opts 20 (range))\n#_(bounded-count-opts 20 (range 3234567))\n\n(defn drop+take-xf\n  \"Takes a map with optional `:n` and `:offset` and returns a transducer that drops `:offset` and takes `:n`.\"\n  [{:keys [n offset]\n    :or {offset 0}}]\n  (cond-> (drop offset)\n    (int? n)\n    (comp (take n))))\n\n#_(sequence (drop+take-xf {:n 10}) (range 100))\n#_(sequence (drop+take-xf {:n 10 :offset 10}) (range 100))\n#_(sequence (drop+take-xf {}) (range 9))\n\n(declare assign-closing-parens)\n\n(defn process-render-fn [{:as viewer :keys [render-fn]}]\n  (cond-> viewer\n    (and render-fn (not (viewer-fn? render-fn)))\n    (update :render-fn ->viewer-fn)))\n\n(defn hash-sha1 [x]\n  #?(:clj (analyzer/valuehash :sha1 x)\n     :cljs (let [hasher (goog.crypt.Sha1.)]\n             (.update hasher (goog.crypt/stringToUtf8ByteArray (pr-str x)))\n             (.digest hasher))))\n\n(defn process-viewer [viewer]\n  (if-not (map? viewer)\n    viewer\n    (-> viewer\n        (dissoc :pred :transform-fn :update-viewers-fn)\n        (as-> viewer (assoc viewer :hash (hash-sha1 viewer)))\n        (process-render-fn))))\n\n#_(process-viewer {:render-fn '#(vector :h1) :transform-fn mark-presented})\n\n(def processed-keys\n  (into [:path :offset :n :nextjournal/content-type :nextjournal/value]\n        (-> viewer-opts-normalization vals set (disj :nextjournal/viewers))))\n\n(defn process-wrapped-value [wrapped-value]\n  (-> wrapped-value\n      (select-keys processed-keys)\n      (update :nextjournal/viewer process-viewer)))\n\n#_(process-wrapped-value (apply-viewers 42))\n\n(defn make-elision [viewers fetch-opts]\n  (->> (with-viewer :elision fetch-opts)\n       (ensure-wrapped-with-viewers viewers)\n       apply-viewers\n       process-wrapped-value))\n\n#_(make-elision default-viewers {:n 20})\n\n(defn find-elision [desc]\n  (->value (first (filter (comp #{:elision} :name :nextjournal/viewer)\n                          (tree-seq (some-fn map? vector?) #(cond-> % (map? %) vals) desc)))))\n\n(defn ->fetch-opts [wrapped-value]\n  (merge {:n (-> wrapped-value ->viewer :page-size)}\n         (select-keys wrapped-value [:path :offset])))\n\n(defn get-elision [wrapped-value]\n  (let [{:as fetch-opts :keys [n]} (->fetch-opts wrapped-value)]\n    (merge fetch-opts (bounded-count-opts n (->value wrapped-value)))))\n\n#_(get-elision (present (range)))\n#_(get-elision (present \"abc\"))\n#_(get-elision (present (str/join (repeat 1000 \"abc\"))))\n\n(defn get-fetch-opts-n [wrapped-value]\n  (-> wrapped-value ->fetch-opts :n))\n\n(defn inherit-opts [{:as wrapped-value :nextjournal/keys [viewers]} value path-segment]\n  (-> (ensure-wrapped-with-viewers viewers value)\n      (merge (select-keys (->opts wrapped-value) [:!budget :budget :path :current-path]))\n      (update :path (fnil conj []) path-segment)\n      (update :current-path (fnil conj []) path-segment)))\n\n(defn present+paginate-children [{:as wrapped-value :nextjournal/keys [viewers preserve-keys?] :keys [!budget budget]}]\n  (let [{:as fetch-opts :keys [offset n]} (->fetch-opts wrapped-value)\n        xs (->value wrapped-value)\n        paginate? (and (number? n) (not preserve-keys?))\n        fetch-opts' (cond-> fetch-opts\n                      (and paginate? !budget (not (map-entry? xs)))\n                      (update :n min @!budget))\n        children (if preserve-keys?\n                   (into {} (map (fn [[k v]] [k (present* (inherit-opts wrapped-value v k))])) xs)\n                   (into []\n                         (comp (if paginate? (drop+take-xf fetch-opts') identity)\n                               (map-indexed (fn [i x] (present* (inherit-opts wrapped-value x (+ i (or offset 0))))))\n                               (remove nil?))\n                         (ensure-sorted xs)))\n        {:as elision :keys [total unbounded?]} (and paginate? (get-elision wrapped-value))\n        new-offset (when paginate? (or (some-> children peek :path peek inc) 0))]\n    (cond-> children\n      (and paginate? (or unbounded? (< new-offset total)))\n      (conj (let [fetch-opts (assoc elision :offset new-offset)]\n              (make-elision viewers fetch-opts))))))\n\n(defn present+paginate-string [{:as wrapped-value :nextjournal/keys [viewers viewer value]}]\n  (let [{:as elision :keys [n total path offset]} (and (:page-size viewer)\n                                                       (get-elision wrapped-value))]\n    (if (and n (< n total))\n      (let [new-offset (min (+ (or offset 0) n) total)]\n        (cond-> [(subs value (or offset 0) new-offset)]\n          (pos? (- total new-offset)) (conj (let [fetch-opts (-> elision\n                                                                 (assoc :offset new-offset :replace-path (conj path new-offset)))]\n                                              (make-elision viewers fetch-opts)))\n          true ensure-wrapped))\n      value)))\n\n\n(defn ^:private present* [{:as wrapped-value\n                           :keys [path current-path !budget]\n                           :nextjournal/keys [viewers]}]\n  (when (empty? viewers)\n    (throw (ex-info \"cannot present* with empty viewers\" {:wrapped-value wrapped-value})))\n  (let [{:as wrapped-value :nextjournal/keys [viewers presented?]} (apply-viewers* wrapped-value)\n        descend? (< (count current-path)\n                    (count path))\n        xs (->value wrapped-value)]\n    #_(prn :xs xs :type (type xs) :path path :current-path current-path :descend? descend?)\n    (when (and !budget (not descend?) (not presented?))\n      (swap! !budget #(max (dec %) 0)))\n    (-> (merge (->opts wrapped-value)\n               (with-viewer (->viewer wrapped-value)\n                 (cond presented?\n                       wrapped-value\n\n                       descend? ;; TODO: can this be unified, simplified, or even dropped in favor of continuation?\n                       (let [idx (first (drop (count current-path) path))]\n                         (present* (-> (ensure-wrapped-with-viewers\n                                        viewers\n                                        (cond (and (map? xs) (keyword? idx)) (get xs idx)\n                                              (or (map? xs) (set? xs)) (nth (seq (ensure-sorted xs)) idx)\n                                              (associative? xs) (get xs idx)\n                                              (sequential? xs) (nth xs idx)))\n                                       (merge (->opts wrapped-value))\n                                       (update :current-path (fnil conj []) idx))))\n\n                       (string? xs)\n                       (present+paginate-string wrapped-value)\n\n                       (and xs (seqable? xs))\n                       (present+paginate-children wrapped-value)\n\n                       :else ;; leaf value\n                       xs)))\n        process-wrapped-value)))\n\n(defn assign-content-lengths [wrapped-value]\n  (w/postwalk\n   (fn [x]\n     (if-let [value (and (wrapped-value? x) (:nextjournal/value x))]\n       (let [{:nextjournal/keys [viewer]} x\n             {:keys [name opening-paren closing-paren]} viewer\n             elision-content-length 6]\n         (assoc x\n                :content-length\n                (cond\n                  (or (nil? value) (char? value) (string? value) (keyword? value) (symbol? value) (number? value))\n                  (count (pr-str value))\n                  (contains? #{:elision} name)\n                  elision-content-length\n                  (contains? #{:map-entry} name)\n                  (reduce + 1 (map #(:content-length % 0) value))\n                  (vector? value)\n                  (->> value\n                       (map #(:content-length % 0))\n                       (reduce + (+ (count opening-paren) (count closing-paren)))\n                       (+ (dec (count value))))\n                  :else 0)\n                :type name))\n       x))\n   wrapped-value))\n\n(defn compute-expanded-at [{:as state :keys [indents expanded-at prev-type]}\n                           {:nextjournal/keys [value]\n                            :keys [content-length path type]\n                            :or {content-length 0}}]\n  (let [max-length (- 80 (reduce + 0 indents))\n        expanded? (< max-length content-length)\n        state' (assoc state\n                      :expanded-at (assoc expanded-at path expanded?)\n                      :prev-type type\n                      :indents (conj\n                                (->> indents (take (count path)) vec)\n                                (cond\n                                  (contains? #{:map-entry} prev-type) (or content-length 0)\n                                  (vector? value) 2\n                                  :else 1)))]\n    (if (vector? value)\n      (reduce compute-expanded-at state' value)\n      state')))\n\n(defn collect-expandable-paths [state {:nextjournal/keys [value] :keys [path]}]\n  (let [state' (assoc-in state [:expanded-at path] false)]\n    (if (vector? value)\n      (reduce collect-expandable-paths state' value)\n      state')))\n\n(defn assign-expanded-at [{:as wrapped-value :keys [content-length]}]\n  (assoc wrapped-value :nextjournal/expanded-at (:expanded-at (if content-length\n                                                                (compute-expanded-at {:expanded-at {}} wrapped-value)\n                                                                (collect-expandable-paths {:expanded-at {}} wrapped-value)))))\n\n(comment\n  (:nextjournal/expanded-at (present {:a-vector [1 2 3] :a-list '(123 234 345) :a-set #{1 2 3 4}}))\n  (= (count \"[1 2 [1 [2] 3] 4 5]\")\n     (:content-length (assign-content-lengths (present [1 2 [1 [2] 3] 4 5]))))\n  (= (count \"{:a-vector [1 2 3] :a-list (123 234 345) :a-set #{1 2 3 4}}\")\n     (:content-length (assign-content-lengths (present {:a-vector [1 2 3] :a-list '(123 234 345) :a-set #{1 2 3 4}}))))\n  ;; Check for elisions as well\n  (assign-content-lengths (present {:foo (vec (repeat 2 {:baz (range 30) :fooze (range 40)})) :bar (range 20)})))\n\n(defn present\n  \"Returns a subset of a given `value`.\"\n  ([x] (present x {}))\n  ([x opts]\n   (-> (ensure-wrapped-with-viewers x)\n       (merge {:!budget (atom (:budget opts 200))\n               :path (:path opts [])\n               :current-path (:current-path opts [])}\n              opts)\n       present*\n       assign-closing-parens)))\n\n(comment\n  (present [\\a \\b])\n  (present [42])\n  (-> (present (range 100)) ->value peek)\n  (present {:hello [1 2 3]})\n  (present {:one [1 2 3] 1 2 3 4})\n  (present [1 2 [1 [2] 3] 4 5])\n  (present (clojure.java.io/file \"notebooks\"))\n  (present {:viewers [{:pred sequential? :render-fn pr-str}]} (range 100))\n  (present (map vector (range)))\n  (present (subs (slurp \"/usr/share/dict/words\") 0 1000))\n  #_:clj-kondo/ignore ;; remove when clj-kondo is released\n  (present (plotly {:data [{:z [[1 2 3] [3 2 1]] :type \"surface\"}]}))\n  (present [(with-viewer :html [:h1 \"hi\"])])\n  (present (with-viewer :html [:ul (for [x (range 3)] [:li x])]))\n  (present (range))\n  (present {1 [2]})\n  (present (with-viewer '(fn [name] (html [:<> \"Hello \" name])) \"James\"))\n  (present {:foo (vec (repeat 2 {:baz (range 30) :fooze (range 40)})) :bar (range 20)}))\n\n(defn desc->values\n  \"Takes a `description` and returns its value. Inverse of `present`. Mostly useful for debugging.\"\n  [desc]\n  (let [x (->value desc)\n        viewer-name (-> desc ->viewer :name)]\n    (cond (= viewer-name :elision) (with-meta '... x)\n          (coll? x) (into (case viewer-name\n                            ;; TODO: fix table viewer\n                            (:map :table) {}\n                            (or (empty x) []))\n                          (map desc->values)\n                          x)\n          :else x)))\n\n#_(desc->values (present [1 [2 {:a :b} 2] 3 (range 100)]))\n#_(desc->values (present (table (mapv vector (range 30)))))\n#_(desc->values (present (with-viewer :table (normalize-table-data (repeat 60 [\"Adelie\" \"Biscoe\" 50 30 200 5000 :female])))))\n\n(defn path-to-value [path]\n  (conj (interleave path (repeat :nextjournal/value)) :nextjournal/value))\n\n(defn merge-presentations [root more elision]\n  (update-in root\n             (path-to-value (:path elision))\n             (fn [value]\n               (let [{:keys [offset path]} (-> value peek :nextjournal/value)\n                     path-from-value (conj path offset)\n                     path-from-more (or (:replace-path elision) ;; string case, TODO find a better way to unify\n                                        (-> more :nextjournal/value first :path))]\n                 (when (not= path-from-value path-from-more)\n                   (throw (ex-info \"paths mismatch\" {:path-from-value path-from-value :path-from-more path-from-more :root root :more more :path-to-value (path-to-value (:path more)) :value value})))\n                 (into (pop value) (:nextjournal/value more))))))\n\n\n(defn assign-closing-parens\n  ([node] (assign-closing-parens '() node))\n  ([closing-parens node]\n   (let [value (->value node)\n         viewer (->viewer node)\n         closing (:closing-paren viewer)\n         non-leaf? (and (vector? value) (wrapped-value? (first value)))\n         defer-closing? (and non-leaf?\n                             (or (-> value last :nextjournal/viewer :closing-paren) ;; the last element can carry parens\n                                 (and (= :map-entry (-> value last :nextjournal/viewer :name)) ;; the last element is a map entry whose value can carry parens\n                                      (-> value last :nextjournal/value last :nextjournal/viewer :closing-paren))))]\n     (cond-> (cond\n               (not closing) node\n               defer-closing? (update node :nextjournal/viewer dissoc :closing-paren)\n               :else (update-in node [:nextjournal/viewer :closing-paren] cons closing-parens))\n       non-leaf? (update :nextjournal/value\n                         (fn [xs]\n                           (into []\n                                 (map-indexed (fn [i x]\n                                                (assign-closing-parens (if (and defer-closing? (= (dec (count xs)) i))\n                                                                         (cond->> closing-parens closing (cons closing))\n                                                                         '())\n                                                                       x)))\n                                 xs)))))))\n\n\n(defn reset-viewers!\n  ([viewers] (reset-viewers! *ns* viewers))\n  ([scope viewers] #_:clj-kondo/ignore ;; remove when clj-kondo is released\n   (assert (or (#{:default} scope)\n               #?(:clj (instance? clojure.lang.Namespace scope))))\n   (swap! !viewers assoc scope viewers)))\n\n(defn add-viewers! [viewers]\n  (reset-viewers! *ns* (add-viewers (get-default-viewers) viewers))\n  viewers)\n\n\n\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n;; public convenience api\n(def html         (partial with-viewer html-viewer))\n(def md           (partial with-viewer markdown-viewer))\n(def plotly       (partial with-viewer plotly-viewer))\n(def vl           (partial with-viewer vega-lite-viewer))\n(def table        (partial with-viewer table-viewer))\n(def row          (partial with-viewer-extracting-opts row-viewer))\n(def col          (partial with-viewer-extracting-opts col-viewer))\n(def tex          (partial with-viewer katex-viewer))\n(def notebook     (partial with-viewer (:name notebook-viewer)))\n(def code         (partial with-viewer code-viewer))\n\n(defn ^:dynamic doc-url [path] (str \"#/\" path))\n\n(defn print-hide-result-deprecation-warning []\n  #?(:clj (binding [*out* *err*]\n            (prn \"`hide-result` has been deprecated, please put `^{:nextjournal.clerk/visibility {:result :hide}}` metadata on the form instead.\"))))\n\n(defn hide-result\n  \"Deprecated, please put ^{:nextjournal.clerk/visibility {:result :hide}} metadata on the form instead.\"\n  {:deprecated \"0.10\"}\n  ([x] (print-hide-result-deprecation-warning) (with-viewer hide-result-viewer {} x))\n  ([viewer-opts x] (print-hide-result-deprecation-warning) (with-viewer hide-result-viewer viewer-opts x)))\n\n(def eval-cljs-result-viewer\n  {:transform-fn mark-presented\n   :render-fn '(fn [x]\n                 [nextjournal.clerk.render/inspect x])})\n\n(defn eval-cljs-str [code-string]\n  ;; NOTE: this relies on implementation details on how SCI code is evaluated\n  ;; and will change in a future version of Clerk\n\n  ;; because ViewerEval's are evaluated at read time we can no longer\n  ;; check after read if there was any in the doc. Thus we set the\n  ;; `:nextjournal.clerk/remount` attribute to a hash of the code (so\n  ;; it changes when the code changes and shows up in the doc patch.\n  ;; TODO: simplify, maybe by applying Clerk's analysis to the cljs\n  ;; part as well\n  (with-viewer (assoc eval-cljs-result-viewer :nextjournal.clerk/remount (hash-sha1 code-string) )\n    (->viewer-eval (list 'binding '[*ns* *ns*]\n                         (list 'load-string code-string)))))\n\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n;; examples\n(def example-viewer\n  {:transform-fn (fn [wrapped-value]\n                   (-> wrapped-value\n                       mark-preserve-keys\n                       (assoc :nextjournal/viewer {:render-fn '(fn [{:keys [form val]} opts]\n                                                                 [:div.flex.flex-wrap\n                                                                  {:class \"py-[7px]\"}\n                                                                  [:div [:div.bg-slate-100.px-2.rounded\n                                                                         (nextjournal.clerk.render/inspect-presented opts form)]]\n                                                                  [:div.flex.mt-1\n                                                                   [:div.mx-2.font-sans.text-xs.text-slate-500 {:class \"mt-[2px]\"} \"\u21d2\"]\n                                                                   (nextjournal.clerk.render/inspect-presented opts val)]])})\n                       (update-in [:nextjournal/value :form] code)))})\n\n(def examples-viewer\n  {:transform-fn (update-val (fn [examples]\n                               (mapv (partial with-viewer example-viewer) examples)))\n   :render-fn '(fn [examples opts]\n                 (into [:div.border-l-2.border-slate-300.pl-4\n                        [:div.uppercase.tracking-wider.text-xs.font-sans.text-slate-500.mt-4.mb-2 \"Examples\"]]\n                       (nextjournal.clerk.render/inspect-children opts) examples))})\n"]}